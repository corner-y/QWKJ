<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº‹å‰æ™ºèƒ½é¢„è­¦æ¨¡æ‹Ÿ - åŒ»ä¿å®¡æ ¸ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="../../æ ·å¼æ–‡ä»¶/é€šç”¨æ ·å¼.css">
    <link rel="stylesheet" href="../../æ ·å¼æ–‡ä»¶/unified-sidebar.css">
    <link rel="stylesheet" href="../../æ ·å¼æ–‡ä»¶/æ™ºèƒ½é¢„è­¦æ¨¡æ‹Ÿæ ·å¼.css">
    <style>
        /* åŒ»ç”Ÿå·¥ä½œç«™æ ·å¼ */
        .workstation-container {
            display: flex;
            min-height: 100vh;
            background-color: var(--bg-secondary);
        }
        
        /* é£é™©ç­‰çº§æ„Ÿå¹å·å›¾æ ‡ */
        .risk-icon {
            display: inline-block;
            width: 24px;
            height: 24px;
            line-height: 24px;
            text-align: center;
            border-radius: 50%;
            margin-right: 8px;
            font-weight: bold;
            font-size: 16px;
        }
        
        .risk-icon.medium {
            background-color: var(--warning-color);
            color: white;
        }
        
        .risk-icon.high {
            background-color: var(--error-color);
            color: white;
        }
        
        /* é£é™©å¡ç‰‡æ ·å¼ */
        .risk-card {
            background-color: var(--bg-primary);
            border-radius: var(--radius-large);
            padding: var(--spacing-xl);
            margin-bottom: var(--spacing-xl);
            border-left: 4px solid transparent;
            box-shadow: var(--shadow-light);
        }
        
        /* è¯å“åç§°è¶…é“¾æ¥æ ·å¼ */
        .drug-link {
            color: var(--primary-color);
            text-decoration: underline;
            cursor: pointer;
            transition: color 0.2s ease;
        }
        
        .drug-link:hover {
            color: var(--primary-hover);
        }
        
        /* è¯å“è§„åˆ™å¼¹çª—æ ·å¼ */
        .drug-rule-modal-content {
            max-width: 700px;
        }
        
        .drug-info-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-lg);
            padding-bottom: var(--spacing-lg);
            border-bottom: 2px solid var(--primary-light);
        }
        
        .drug-name-large {
            font-size: var(--font-size-xl);
            font-weight: var(--font-weight-bold);
            color: var(--primary-color);
        }
        
        .drug-rule-section {
            margin-bottom: var(--spacing-xl);
            padding: var(--spacing-lg);
            background-color: var(--bg-secondary);
            border-radius: var(--radius-medium);
        }
        
        .drug-rule-section h4 {
            color: var(--text-primary);
            margin-bottom: var(--spacing-md);
            padding-bottom: var(--spacing-sm);
            border-bottom: 1px solid var(--border-primary);
        }
        
        .drug-rule-list {
            list-style-type: none;
            padding: 0;
        }
        
        .drug-rule-list li {
            margin-bottom: var(--spacing-md);
            padding-left: var(--spacing-lg);
            position: relative;
        }
        
        .drug-rule-list li:before {
            content: "â€¢";
            color: var(--primary-color);
            position: absolute;
            left: 0;
            font-weight: bold;
        }
        
        .risk-card.high {
            border-left-color: var(--error-color);
            background-color: var(--error-light);
        }
        
        .risk-card.medium {
            border-left-color: var(--warning-color);
            background-color: var(--warning-light);
        }
        
        .risk-card.low {
            border-left-color: var(--info-color);
            background-color: var(--info-light);
        }
        
        .risk-card-header {
            display: flex;
            align-items: center;
            margin-bottom: var(--spacing-md);
        }
        
        .risk-card-title {
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-semibold);
            margin-right: var(--spacing-md);
        }
        
        .risk-card-title.high {
            color: var(--error-color);
        }
        
        .risk-card-title.medium {
            color: var(--warning-color);
        }
        
        .risk-card-title.low {
            color: var(--info-color);
        }
        
        .risk-card-drug {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            padding: 4px 8px;
            border-radius: var(--radius-small);
            font-size: var(--font-size-sm);
            margin-right: var(--spacing-md);
            white-space: nowrap;
        }
        
        .risk-card-rule {
            color: var(--text-secondary);
            font-size: var(--font-size-sm);
            background-color: var(--bg-tertiary);
            padding: 4px 8px;
            border-radius: var(--radius-small);
        }
        
        .risk-card-content {
            margin-bottom: var(--spacing-md);
        }
        
        .risk-card-content p {
            margin-bottom: var(--spacing-sm);
            color: var(--text-secondary);
            line-height: var(--line-height-normal);
        }
        
        .risk-card-reason {
            background-color: var(--bg-tertiary);
            padding: var(--spacing-md);
            border-radius: var(--radius-medium);
            margin-bottom: var(--spacing-md);
        }
        
        .risk-card-reason p {
            color: var(--text-secondary);
            line-height: var(--line-height-normal);
        }
        
        .risk-card-suggestion {
            background-color: var(--bg-primary);
            padding: var(--spacing-md);
            border-radius: var(--radius-medium);
            border-left: 3px solid var(--primary-color);
        }
        
        .risk-card-suggestion p {
            color: var(--text-primary);
            line-height: var(--line-height-normal);
            font-weight: var(--font-weight-medium);
        }
        
        /* å¼¹çª—å†…å®¹æ ·å¼ */
        .modal-body {
            max-height: 70vh;
            overflow-y: auto;
        }
        
        .modal-body p {
            margin-bottom: var(--spacing-md);
            color: var(--text-secondary);
            line-height: var(--line-height-normal);
        }
        
        .modal-body p strong {
            color: var(--text-primary);
            font-weight: var(--font-weight-semibold);
        }
        
        .patient-summary {
            background-color: var(--bg-tertiary);
            padding: var(--spacing-lg);
            border-radius: var(--radius-large);
            margin-bottom: var(--spacing-xl);
        }
        
        .patient-summary p {
            margin-bottom: var(--spacing-sm);
            color: var(--text-secondary);
        }
        
        .patient-summary p:last-child {
            margin-bottom: 0;
        }
        
        .guidance-text {
            margin-bottom: var(--spacing-xl);
            font-weight: var(--font-weight-medium);
            color: var(--text-primary);
        }
        
        /* ä¸»å†…å®¹åŒºåŸŸ */
        .main-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }
        
        .workstation-header {
            background-color: var(--bg-primary);
            padding: 20px;
            border-radius: var(--radius-large);
            box-shadow: var(--shadow-light);
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .workstation-header h1 {
            font-size: var(--font-size-2xl);
            color: var(--text-primary);
            margin: 0;
        }
        
        .session-info {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        /* æ‚£è€…ä¿¡æ¯åŒº */
        .patient-info-section {
            background-color: var(--bg-primary);
            padding: 20px;
            border-radius: var(--radius-large);
            box-shadow: var(--shadow-light);
            margin-bottom: 20px;
        }
        
        .patient-info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 16px;
        }
        
        .patient-info-item {
            display: flex;
            flex-direction: column;
        }
        
        .patient-info-label {
            font-size: var(--font-size-sm);
            color: var(--text-tertiary);
            margin-bottom: 4px;
        }
        
        .patient-info-value {
            font-size: var(--font-size-md);
            color: var(--text-primary);
            font-weight: var(--font-weight-medium);
        }
        
        /* å¤„æ–¹ç¼–è¾‘åŒº */
        .prescription-section {
            background-color: var(--bg-primary);
            padding: 20px;
            border-radius: var(--radius-large);
            box-shadow: var(--shadow-light);
            margin-bottom: 20px;
        }
        
        .section-title {
            font-size: var(--font-size-xl);
            color: var(--text-primary);
            margin-bottom: 16px;
            font-weight: var(--font-weight-semibold);
        }
        
        .prescription-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 16px;
        }
        
        .prescription-table th,
        .prescription-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-primary);
        }
        
        .prescription-table th {
            background-color: var(--bg-tertiary);
            font-weight: var(--font-weight-semibold);
            color: var(--text-secondary);
        }
        
        .prescription-table tr:hover {
            background-color: var(--bg-hover);
        }
        
        .add-medication {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .add-medication input,
        .add-medication select {
            padding: 8px 12px;
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-medium);
            font-size: var(--font-size-md);
        }
        
        /* æ“ä½œæŒ‰é’®åŒº */
        .action-section {
            background-color: var(--bg-primary);
            padding: 20px;
            border-radius: var(--radius-large);
            box-shadow: var(--shadow-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .risk-buttons {
            display: flex;
            gap: 12px;
        }
        
        /* é£é™©æŒ‰é’®æ ·å¼ */
        .risk-btn {
            padding: 12px 24px;
            border: none;
            border-radius: var(--radius-medium);
            font-size: var(--font-size-md);
            font-weight: var(--font-weight-medium);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .risk-btn.low {
            background-color: var(--warning-light);
            color: var(--warning-color);
            border: 1px solid var(--warning-color);
        }
        
        .risk-btn.medium {
            background-color: var(--warning-color);
            color: white;
        }
        
        .risk-btn.high {
            background-color: var(--error-color);
            color: white;
        }
        
        .risk-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }
        
        .risk-btn.low:hover {
            background-color: #FFF0E0;
        }
        
        .risk-btn.medium:hover {
            background-color: #FF6A00;
        }
        
        .risk-btn.high:hover {
            background-color: #E63636;
        }
        
        /* å¼¹çª—æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: var(--bg-primary);
            border-radius: var(--radius-large);
            padding: 24px;
            width: 90%;
            max-width: 600px;
            box-shadow: var(--shadow-heavy);
            position: relative;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-primary);
        }
        
        .modal-title {
            font-size: var(--font-size-xl);
            color: var(--text-primary);
            font-weight: var(--font-weight-semibold);
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: var(--text-tertiary);
        }
        
        .modal-body {
            margin-bottom: 24px;
        }
        
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }
        
        /* ä½é£é™©æ‚¬æµ®æç¤º */
        .low-risk-tooltip {
            position: absolute;
            background-color: var(--warning-light);
            border: 1px solid var(--warning-color);
            border-radius: var(--radius-medium);
            padding: 12px;
            max-width: 300px;
            z-index: 1001;
            display: none;
            box-shadow: var(--shadow-medium);
        }
        
        .tooltip-timer {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 4px;
            background-color: var(--warning-color);
            transition: width 1s linear;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .workstation-container {
                flex-direction: column;
            }
            
            .patient-info-grid {
                grid-template-columns: 1fr;
            }
            
            .action-section {
                flex-direction: column;
                gap: 16px;
            }
            
            .risk-buttons {
                flex-wrap: wrap;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="workstation-container">
        <!-- ç»Ÿä¸€å·¦ä¾§èœå• -->
        <div id="sidebar-container"></div>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <div class="main-content">
            <!-- é¡µé¢å¤´éƒ¨ -->
            <div class="workstation-header">
                <h1>äº‹å‰æ™ºèƒ½é¢„è­¦æ¨¡æ‹Ÿ - åŒ»ç”Ÿå·¥ä½œç«™</h1>
                <div class="session-info">
                    <span>å½“å‰åŒ»ç”Ÿ: å¼ åŒ»ç”Ÿ</span>
                    <span>ç§‘å®¤: å¿ƒå†…ç§‘</span>
                    <span id="current-time"></span>
                </div>
            </div>

            <!-- æ‚£è€…ä¿¡æ¯åŒº -->
            <div class="patient-info-section">
                <h2 class="section-title">æ‚£è€…ä¿¡æ¯</h2>
                <div class="patient-info-grid">
                    <div class="patient-info-item">
                        <div class="patient-info-label">æ‚£è€…å§“å</div>
                        <div class="patient-info-value">ç‹æ™“æ˜</div>
                    </div>
                    <div class="patient-info-item">
                        <div class="patient-info-label">æ€§åˆ«/å¹´é¾„</div>
                        <div class="patient-info-value">ç”· / 65å²</div>
                    </div>
                    <div class="patient-info-item">
                        <div class="patient-info-label">åŒ»ä¿ç±»å‹</div>
                        <div class="patient-info-value">åŸé•‡èŒå·¥åŒ»ä¿</div>
                    </div>
                    <div class="patient-info-item">
                        <div class="patient-info-label">ä½é™¢å·</div>
                        <div class="patient-info-value">ZY20250826001</div>
                    </div>
                    <div class="patient-info-item">
                        <div class="patient-info-label">å…¥é™¢æ—¥æœŸ</div>
                        <div class="patient-info-value">2025-08-20</div>
                    </div>
                    <div class="patient-info-item">
                        <div class="patient-info-label">è¯Šæ–­</div>
                        <div class="patient-info-value">å† å¿ƒç—…ã€é«˜è¡€å‹2çº§</div>
                    </div>
                    <div class="patient-info-item">
                        <div class="patient-info-label">è¿‡æ•å²</div>
                        <div class="patient-info-value">é’éœ‰ç´ </div>
                    </div>
                    <div class="patient-info-item">
                        <div class="patient-info-label">å½“å‰çŠ¶æ€</div>
                        <div class="patient-info-value">ç¨³å®š</div>
                    </div>
                </div>
            </div>

            <!-- å¤„æ–¹ç¼–è¾‘åŒº -->
            <div class="prescription-section">
                <h2 class="section-title">å¤„æ–¹ç¼–è¾‘</h2>
                <div class="add-medication">
                    <input type="text" placeholder="è¯å“åç§°" id="medication-name">
                    <input type="number" placeholder="å‰‚é‡" id="medication-dose">
                    <select id="medication-unit">
                        <option value="mg">mg</option>
                        <option value="g">g</option>
                        <option value="ml">ml</option>
                    </select>
                    <input type="text" placeholder="ç”¨æ³•" id="medication-usage">
                    <input type="number" placeholder="é¢‘æ¬¡" id="medication-frequency">
                    <button class="btn btn-primary" onclick="addMedication()">æ·»åŠ è¯å“</button>
                </div>
                <table class="prescription-table">
                    <thead>
                        <tr>
                            <th>è¯å“åç§°</th>
                            <th>å‰‚é‡</th>
                            <th>ç”¨æ³•</th>
                            <th>é¢‘æ¬¡</th>
                            <th>é‡‘é¢</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="medication-list">
                        <tr>
                            <td>é˜¿å¸åŒ¹æ—è‚ æº¶ç‰‡</td>
                            <td>100mg</td>
                            <td>å£æœ</td>
                            <td>æ¯æ—¥ä¸€æ¬¡</td>
                            <td>Â¥8.50</td>
                            <td><button class="btn btn-secondary" onclick="removeMedication(this)">åˆ é™¤</button></td>
                        </tr>
                        <tr>
                            <td>æ°¯å¡æ ¼é›·ç‰‡</td>
                            <td>75mg</td>
                            <td>å£æœ</td>
                            <td>æ¯æ—¥ä¸€æ¬¡</td>
                            <td>Â¥35.80</td>
                            <td><button class="btn btn-secondary" onclick="removeMedication(this)">åˆ é™¤</button></td>
                        </tr>
                        <tr>
                            <td>è¾›ä¼ä»–æ±€ç‰‡</td>
                            <td>20mg</td>
                            <td>å£æœ</td>
                            <td>æ¯æ™šä¸€æ¬¡</td>
                            <td>Â¥12.30</td>
                            <td><button class="btn btn-secondary" onclick="removeMedication(this)">åˆ é™¤</button></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- æ“ä½œæŒ‰é’®åŒº -->
            <div class="action-section">
                <div class="risk-buttons">
                    <a href="#" class="btn btn-secondary" style="border: 1px solid var(--border-primary);" id="low-risk-btn" onclick="showModal('low-risk-modal'); return false;">ä½é£é™©é¢„è­¦</a>
                    <a href="#" class="risk-btn medium" id="medium-risk-btn" onclick="showModal('medium-risk-modal'); return false;">ä¸­é£é™©é¢„è­¦</a>
                    <a href="#" class="risk-btn high" id="high-risk-btn" onclick="showModal('high-risk-modal'); return false;">é«˜é£é™©é¢„è­¦</a>
                </div>
                <div>
                    <button class="btn btn-primary" onclick="showModal('high-risk-modal'); return false;">ä¿å­˜å¤„æ–¹</button>
                    <button class="btn btn-secondary" onclick="clearPrescription()">æ¸…ç©ºå¤„æ–¹</button>
                </div>
            </div>
        </div>
    </div>

    <!-- å¼¹çª— -->
    <div class="modal" id="low-risk-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"><span class="risk-icon low">!</span>ä½é£é™©é¢„è­¦æç¤º</h3>
                <button class="modal-close" onclick="closeModal('low-risk-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <!-- æ‚£è€…æ‘˜è¦ä¿¡æ¯ -->
                <div class="patient-summary">
                    <p><strong>æ‚£è€…ï¼š</strong>ç‹æ™“æ˜ï¼Œç”·æ€§ï¼Œ65å²</p>
                    <p><strong>è¯Šæ–­ï¼š</strong>å† å¿ƒç—…ã€é«˜è¡€å‹2çº§ã€2å‹ç³–å°¿ç—…ã€æ€¥æ€§æ”¯æ°”ç®¡ç‚</p>
                </div>
                
                <!-- å¼•å¯¼è¯­ -->
                <p class="guidance-text">ç³»ç»Ÿæ£€æµ‹åˆ°å½“å‰å¤„æ–¹å­˜åœ¨ä»¥ä¸‹ä½é£é™©é—®é¢˜ï¼Œè¯·ç•™æ„ï¼š</p>
                
              
                
                <!-- ä½é£é™©é¢„è­¦å¡ç‰‡äºŒ -->
                <div class="risk-card low">
                    <div class="risk-card-header">
                        <span class="risk-card-title low">ğŸ”µ ä½é£é™©æç¤º</span>
                        <span class="risk-card-drug"><a href="#" class="drug-link" onclick="showDrugRule('å¤æ–¹ç£·é…¸å¯å¾…å› æº¶æ¶²'); return false;">å¤æ–¹ç£·é…¸å¯å¾…å› æº¶æ¶²</a></span>
                        <span class="risk-card-rule">åˆç†ç”¨è¯ - è¯Šæ–­æ”¯æ’‘ä¸è¶³</span>
                    </div>
                    <div class="risk-card-content">
                        <p>å½“å‰è¯Šæ–­'æ€¥æ€§æ”¯æ°”ç®¡ç‚'ï¼Œä¸è¶³ä»¥å……åˆ†æ”¯æ’‘ä½¿ç”¨ä¸­æ¢æ€§é•‡å’³è¯ã€<a href="#" class="drug-link" onclick="showDrugRule('å¤æ–¹ç£·é…¸å¯å¾…å› æº¶æ¶²'); return false;">å¤æ–¹ç£·é…¸å¯å¾…å› æº¶æ¶²</a>ã€‘ã€‚</p>
                    </div>
                    <!-- <div class="risk-card-reason">
                        <p>å¤æ–¹ç£·é…¸å¯å¾…å› å«æœ‰éº»é†‰è¯å“æˆåˆ†ï¼Œå…·æœ‰æ½œåœ¨æˆç˜¾æ€§ã€‚ä¸´åºŠæŒ‡å—å»ºè®®ä»…åœ¨å¸¸è§„ç¥›ç—°ã€é•‡å’³æ²»ç–—æ— æ•ˆï¼Œä¸”å‰§çƒˆå¹²å’³ä¸¥é‡å½±å“ä¼‘æ¯æ—¶æ‰è€ƒè™‘çŸ­æœŸä½¿ç”¨ã€‚</p>
                    </div> -->
                    <div class="risk-card-suggestion">
                        <p>å»ºè®®åœ¨ç—…ç¨‹è®°å½•ä¸­è¯¦ç»†æè¿°å’³å—½çš„æ€§è´¨ã€é¢‘ç‡å’Œä¸¥é‡ç¨‹åº¦ï¼Œä»¥æ”¯æ’‘ç”¨è¯çš„åŒ»ç–—å¿…è¦æ€§ï¼›æˆ–è€ƒè™‘æ›´æ¢ä¸ºéä¸­æ¢æ€§/ééº»é†‰æ€§çš„é•‡å’³è¯ç‰©ï¼ˆå¦‚ï¼šå³ç¾æ²™èŠ¬ï¼‰ã€‚</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="savePrescription()">è°ƒæ•´å¤„æ–¹</button>
                <button class="btn btn-primary" onclick="continueAndSave()">ç»§ç»­ä¿å­˜</button>
            </div>
        </div>
    </div>

    <div class="modal modal-non-force" id="medium-risk-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"><span class="risk-icon medium">!</span>ä¸­é£é™©é¢„è­¦æç¤º</h3>
                <button class="modal-close" onclick="closeModal('medium-risk-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <!-- æ‚£è€…æ‘˜è¦ä¿¡æ¯ -->
                <div class="patient-summary">
                    <p><strong>æ‚£è€…ï¼š</strong>ç‹æ™“æ˜ï¼Œç”·æ€§ï¼Œ65å²</p>
                    <p><strong>è¯Šæ–­ï¼š</strong>å† å¿ƒç—…ã€é«˜è¡€å‹2çº§ã€2å‹ç³–å°¿ç—…ã€æ€¥æ€§æ”¯æ°”ç®¡ç‚</p>
                </div>
                
                <!-- å¼•å¯¼è¯­ -->
                <p class="guidance-text">ç³»ç»Ÿæ£€æµ‹åˆ°å½“å‰å¤„æ–¹å­˜åœ¨ä»¥ä¸‹é£é™©é—®é¢˜ï¼Œè¯·æ ¸å¯¹å¤„ç†ï¼š</p>
                
                <!-- ä¸­é£é™©é¢„è­¦å¡ç‰‡ -->
                <div class="risk-card medium">
                    <div class="risk-card-header">
                        <span class="risk-card-title medium">ğŸŸ  ä¸­é£é™©é¢„è­¦</span>
                        <span class="risk-card-drug"><a href="#" class="drug-link" onclick="showDrugRule('è‹¯ç£ºé…¸æ°¨æ°¯åœ°å¹³ç‰‡'); return false;">è‹¯ç£ºé…¸æ°¨æ°¯åœ°å¹³ç‰‡</a></span>
                        <span class="risk-card-rule">åŒ»ä¿è§„å®š - æ…¢ç—…é•¿å¤„æ–¹è¶…é‡</span>
                    </div>
                    <div class="risk-card-content">
                        <p>å¤„æ–¹ä¸­ã€<a href="#" class="drug-link" onclick="showDrugRule('è‹¯ç£ºé…¸æ°¨æ°¯åœ°å¹³ç‰‡'); return false;">è‹¯ç£ºé…¸æ°¨æ°¯åœ°å¹³ç‰‡</a>ã€‘æœ¬æ¬¡å¼€å…·æ•°é‡ä¸º 90å¤© ç”¨é‡ï¼Œè¶…å‡ºäº†æœ¬åœ°åŒ»ä¿å¯¹é«˜è¡€å‹æ…¢ç—…é•¿å¤„æ–¹å•æ¬¡æœ€å¤š 75å¤© çš„é™é‡è§„å®šã€‚</p>
                    </div>
                    <!-- <div class="risk-card-reason">
                        <p>è¶…å‡ºåŒ»ä¿å•æ¬¡é™é‡è§„å®šï¼Œè¶…å‡ºéƒ¨åˆ†çš„è¯å“è´¹ç”¨ï¼ˆ15å¤©é‡ï¼‰å¯èƒ½æ— æ³•æŒ‰æ…¢ç—…å¾…é‡æŠ¥é”€ï¼Œæˆ–åœ¨ä¸Šä¼ è´¹ç”¨æ—¶å¯¼è‡´æ•´å¼ å¤„æ–¹å®¡æ ¸å¤±è´¥ã€‚</p>
                    </div> -->
                    <div class="risk-card-suggestion">
                        <p>å»ºè®®å°†è¯å“æ•°é‡è°ƒæ•´ä¸ºç¬¦åˆ 75å¤© ç”¨é‡çš„æ•°é‡ï¼ˆä¾‹å¦‚ï¼š2ç›’å…±56ç‰‡ï¼Œæˆ–æŒ‰å•ç‰‡è®¡ç®—çš„75ç‰‡ï¼‰ã€‚</p>
                    </div>
                </div>
                
                <!-- ä½é£é™©é¢„è­¦å¡ç‰‡ -->
                <div class="risk-card low">
                    <div class="risk-card-header">
                        <span class="risk-card-title low">ğŸ”µ ä½é£é™©æç¤º</span>
                        <span class="risk-card-drug"><a href="#" class="drug-link" onclick="showDrugRule('åæ³•æ—é’ ç‰‡'); return false;">åæ³•æ—é’ ç‰‡</a></span>
                        <span class="risk-card-rule">åˆç†ç”¨è¯ - ç¼ºå°‘å¿…è¦ç›‘æµ‹</span>
                    </div>
                    <div class="risk-card-content">
                        <p>æ‚¨å¼€å…·äº†å£æœæŠ—å‡è¯ç‰©ã€<a href="#" class="drug-link" onclick="showDrugRule('åæ³•æ—é’ ç‰‡'); return false;">åæ³•æ—é’ ç‰‡</a>ã€‘ï¼Œä½†æœ¬æ¬¡å°±è¯Šçš„åŒ»å˜±ä¸­æœªåŒ…å«å¿…è¦çš„å‡è¡€åŠŸèƒ½ç›‘æµ‹é¡¹ç›®ã€‚</p>
                    </div>
                    <!-- <div class="risk-card-reason">
                        <p>åæ³•æ—æ²»ç–—çª—çª„ï¼Œå…¶æŠ—å‡æ•ˆæœä¸ªä½“å·®å¼‚å¤§ä¸”æ˜“å—å¤šç§å› ç´ å½±å“ã€‚æ ¹æ®ä¸´åºŠæŒ‡å—ï¼Œ<strong>éœ€å®šæœŸç›‘æµ‹å‡è¡€é…¶åŸæ—¶é—´å›½é™…æ ‡å‡†åŒ–æ¯”å€¼ï¼ˆINRï¼‰</strong>ä»¥è°ƒæ•´å‰‚é‡ï¼Œæœ‰æ•ˆé¢„é˜²å‡ºè¡€æˆ–è¡€æ “äº‹ä»¶ã€‚</p>
                    </div> -->
                    <div class="risk-card-suggestion">
                        <p>å»ºè®®ä¸ºæ‚£è€…è¿½åŠ å¼€å…· [å‡è¡€åŠŸèƒ½(PT/INR)] æ£€æŸ¥ã€‚å¦‚ä¸‹æ¬¡å¤è¯Šæ—¶ç›‘æµ‹ï¼Œè¯·åœ¨ç—…ç¨‹ä¸­æ³¨æ˜ã€‚</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="ignoreAndSave()">å¿½ç•¥å¹¶ä¿å­˜</button>
                <button class="btn btn-primary" onclick="adjustPrescription()">è°ƒæ•´å¤„æ–¹ï¼ˆæ¨èï¼‰</button>
            </div>
        </div>
    </div>

    <div class="modal modal-force" id="high-risk-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"><span class="risk-icon high">!</span>é«˜é£é™©é¢„è­¦æç¤º</h3>
                <!-- é«˜é£é™©å¼¹çª—æ— å…³é—­æŒ‰é’®ï¼Œå¼ºåˆ¶ç”¨æˆ·å¤„ç† -->
            </div>
            <div class="modal-body">
                <!-- æ‚£è€…æ‘˜è¦ä¿¡æ¯ -->
                <div class="patient-summary">
                    <p><strong>æ‚£è€…ï¼š</strong>ç‹æ™“æ˜ï¼Œç”·æ€§ï¼Œ65å²</p>
                    <p><strong>è¯Šæ–­ï¼š</strong>å† å¿ƒç—…ã€é«˜è¡€å‹2çº§ã€2å‹ç³–å°¿ç—…ã€æ€¥æ€§æ”¯æ°”ç®¡ç‚</p>
                </div>
                
                <!-- å¼•å¯¼è¯­ -->
                <p class="guidance-text">ç³»ç»Ÿæ£€æµ‹åˆ°å½“å‰å¤„æ–¹å­˜åœ¨ä»¥ä¸‹ 5 ä¸ªé—®é¢˜ï¼Œè¯·é€ä¸€æ ¸å¯¹å¤„ç†ï¼š</p>
                
                <!-- é£é™©å¡ç‰‡ä¸€ï¼šé«˜é£é™© -->
                <div class="risk-card high">
                    <div class="risk-card-header">
                        <span class="risk-card-title high">ğŸ”´ é«˜é£é™©é¢„è­¦</span>
                        <span class="risk-card-drug"><a href="#" class="drug-link" onclick="showDrugRule('å¤´å­¢å…‹æ´›èƒ¶å›Š'); return false;">å¤´å­¢å…‹æ´›èƒ¶å›Š</a></span>
                        <span class="risk-card-rule">åˆç†ç”¨è¯ - ç¦å¿Œç—‡ (è¿‡æ•å²)</span>
                    </div>
                    <div class="risk-card-content">
                        <p>å¤„æ–¹ä¸­ã€<a href="#" class="drug-link" onclick="showDrugRule('å¤´å­¢å…‹æ´›èƒ¶å›Š'); return false;">å¤´å­¢å…‹æ´›èƒ¶å›Š</a>ã€‘ä¸æ‚£è€…ç”µå­ç—…å†ä¸­æ˜ç¡®è®°è½½çš„ã€é’éœ‰ç´ è¿‡æ•å²ã€‘å­˜åœ¨æ½œåœ¨çš„äº¤å‰è¿‡æ•é£é™©ï¼</p>
                    </div>
                    <!-- <div class="risk-card-reason">
                        <p>å¤´å­¢èŒç´ ç±»è¯ç‰©ï¼ˆå¦‚å¤´å­¢å…‹æ´›ï¼‰ä¸é’éœ‰ç´ ç±»è¯ç‰©åŒ–å­¦ç»“æ„ç›¸ä¼¼ï¼Œä¸´åºŠæ•°æ®æ˜¾ç¤ºçº¦æœ‰5-10%çš„äº¤å‰è¿‡æ•ååº”ç‡ã€‚æ­¤ç±»ååº”å¯èƒ½éå¸¸ä¸¥é‡ï¼ŒåŒ…æ‹¬å¼•å‘è¿‡æ•æ€§ä¼‘å…‹ï¼Œå±åŠç”Ÿå‘½ã€‚</p>
                    </div> -->
                    <div class="risk-card-suggestion">
                        <p>ç«‹å³åœæ­¢ä½¿ç”¨æ­¤è¯ç‰©ï¼è¯·æ›´æ¢ä¸ºå¤§ç¯å†…é…¯ç±»ï¼ˆå¦‚é˜¿å¥‡éœ‰ç´ ï¼‰ã€å–¹è¯ºé…®ç±»ï¼ˆå¦‚å·¦æ°§æ°Ÿæ²™æ˜Ÿï¼‰ç­‰æ— äº¤å‰è¿‡æ•é£é™©çš„æ›¿ä»£æŠ—èŒè¯ç‰©ã€‚</p>
                    </div>
                </div>
                
                <!-- é£é™©å¡ç‰‡äºŒï¼šä¸­é£é™© -->
                <div class="risk-card medium">
                    <div class="risk-card-header">
                        <span class="risk-card-title medium">ğŸŸ  ä¸­é£é™©é¢„è­¦</span>
                        <span class="risk-card-drug"><a href="#" class="drug-link" onclick="showDrugRule('è‹¯ç£ºé…¸æ°¨æ°¯åœ°å¹³ç‰‡'); return false;">è‹¯ç£ºé…¸æ°¨æ°¯åœ°å¹³ç‰‡</a></span>
                        <span class="risk-card-rule">åŒ»ä¿è§„å®š - æ…¢ç—…é•¿å¤„æ–¹è¶…é‡</span>
                    </div>
                    <div class="risk-card-content">
                        <p>å¤„æ–¹ä¸­ã€<a href="#" class="drug-link" onclick="showDrugRule('è‹¯ç£ºé…¸æ°¨æ°¯åœ°å¹³ç‰‡'); return false;">è‹¯ç£ºé…¸æ°¨æ°¯åœ°å¹³ç‰‡</a>ã€‘æœ¬æ¬¡å¼€å…·æ•°é‡ä¸º 90å¤© ç”¨é‡ï¼Œè¶…å‡ºäº†æœ¬åœ°åŒ»ä¿å¯¹é«˜è¡€å‹æ…¢ç—…é•¿å¤„æ–¹å•æ¬¡æœ€å¤š 75å¤© çš„é™é‡è§„å®šã€‚</p>
                    </div>
                    <!-- <div class="risk-card-reason">
                        <p>è¶…å‡ºåŒ»ä¿å•æ¬¡é™é‡è§„å®šï¼Œè¶…å‡ºéƒ¨åˆ†çš„è¯å“è´¹ç”¨ï¼ˆ15å¤©é‡ï¼‰å¯èƒ½æ— æ³•æŒ‰æ…¢ç—…å¾…é‡æŠ¥é”€ï¼Œæˆ–åœ¨ä¸Šä¼ è´¹ç”¨æ—¶å¯¼è‡´æ•´å¼ å¤„æ–¹å®¡æ ¸å¤±è´¥ã€‚</p>
                    </div> -->
                    <div class="risk-card-suggestion">
                        <p>å»ºè®®å°†è¯å“æ•°é‡è°ƒæ•´ä¸ºç¬¦åˆ 75å¤© ç”¨é‡çš„æ•°é‡ï¼ˆä¾‹å¦‚ï¼š2ç›’å…±56ç‰‡ï¼Œæˆ–æŒ‰å•ç‰‡è®¡ç®—çš„75ç‰‡ï¼‰ã€‚</p>
                    </div>
                </div>
                
                <!-- é£é™©å¡ç‰‡ä¸‰ï¼šä¸­é£é™© -->
                <div class="risk-card medium">
                    <div class="risk-card-header">
                        <span class="risk-card-title medium">ğŸŸ  ä¸­é£é™©é¢„è­¦</span>
                        <span class="risk-card-drug"><a href="#" class="drug-link" onclick="showDrugRule('è‹¯ç£ºé…¸æ°¨æ°¯åœ°å¹³ç‰‡'); return false;">è‹¯ç£ºé…¸æ°¨æ°¯åœ°å¹³ç‰‡</a></span>
                        <span class="risk-card-rule">åˆç†ç”¨è¯ - é‡å¤ç”¨è¯</span>
                    </div>
                    <div class="risk-card-content">
                        <p>ç³»ç»Ÿæ£€æµ‹åˆ°æ‚£è€…é•¿æœŸæœç”¨è¯ç‰©æ¸…å•ä¸­åŒ…å«ã€<a href="#" class="drug-link" onclick="showDrugRule('å°¼ç¾¤åœ°å¹³ç‰‡'); return false;">å°¼ç¾¤åœ°å¹³ç‰‡</a>ã€‘ï¼Œè€Œæœ¬æ¬¡å¤„æ–¹ä¸­çš„ã€<a href="#" class="drug-link" onclick="showDrugRule('è‹¯ç£ºé…¸æ°¨æ°¯åœ°å¹³ç‰‡'); return false;">è‹¯ç£ºé…¸æ°¨æ°¯åœ°å¹³ç‰‡</a>ã€‘ ä½œç”¨æœºåˆ¶å®Œå…¨ä¸€è‡´ï¼ˆå‡é€šè¿‡é˜»æ»è¡€ç®¡å¹³æ»‘è‚Œé’™é€šé“æ‰©å¼ è¡€ç®¡ã€é™ä½è¡€å‹ï¼Œæˆ–ç¼“è§£å¿ƒç»ç—›ï¼‰ã€‚</p>
                    </div>
                    <!-- <div class="risk-card-reason">
                        <p>ä¸¤è€…ä½œç”¨æœºåˆ¶å®Œå…¨ä¸€è‡´ â€”â€” å‡é€šè¿‡é˜»æ»è¡€ç®¡å¹³æ»‘è‚Œç»†èƒè†œä¸Šçš„é’™é€šé“ï¼Œæ‰©å¼ å¤–å‘¨è¡€ç®¡ä»¥é™ä½è¡€å‹ï¼Œæˆ–ç¼“è§£å† çŠ¶åŠ¨è„‰ç—‰æŒ›ä»¥æ”¹å–„å¿ƒç»ç—›ã€‚äºŒè€…è”ç”¨ç›¸å½“äº â€œåŒç±»è¯ç‰©å åŠ â€ï¼Œä¸ä¼šå¢å¼ºæ²»ç–—æ•ˆæœï¼Œåè€Œä¼šæ”¾å¤§è¯ç‰©å¯¹èº«ä½“çš„ä½œç”¨ï¼Œå¯¼è‡´ä¸è‰¯ååº”å‘ç”Ÿç‡å’Œä¸¥é‡ç¨‹åº¦æ˜¾è‘—ä¸Šå‡ï¼š</p>
                    </div> -->
                    <div class="risk-card-suggestion">
                        <p>è¯·è¯„ä¼°å¹¶åœç”¨å…¶ä¸­ä¸€ç§è¯ç‰©ã€‚</p>
                    </div>
                </div>
                
                <!-- é£é™©å¡ç‰‡å››ï¼šä½é£é™© -->
                <div class="risk-card low">
                    <div class="risk-card-header">
                        <span class="risk-card-title low">ğŸ”µ ä½é£é™©æç¤º</span>
                        <span class="risk-card-drug"><a href="#" class="drug-link" onclick="showDrugRule('åæ³•æ—é’ ç‰‡'); return false;">åæ³•æ—é’ ç‰‡</a></span>
                        <span class="risk-card-rule">åˆç†ç”¨è¯ - ç¼ºå°‘å¿…è¦ç›‘æµ‹</span>
                    </div>
                    <div class="risk-card-content">
                        <p>æ‚¨å¼€å…·äº†å£æœæŠ—å‡è¯ç‰©ã€<a href="#" class="drug-link" onclick="showDrugRule('åæ³•æ—é’ ç‰‡'); return false;">åæ³•æ—é’ ç‰‡</a>ã€‘ï¼Œä½†æœ¬æ¬¡å°±è¯Šçš„åŒ»å˜±ä¸­æœªåŒ…å«å¿…è¦çš„å‡è¡€åŠŸèƒ½ç›‘æµ‹é¡¹ç›®ã€‚</p>
                    </div>
                    <!-- <div class="risk-card-reason">
                        <p>åæ³•æ—æ²»ç–—çª—çª„ï¼Œå…¶æŠ—å‡æ•ˆæœä¸ªä½“å·®å¼‚å¤§ä¸”æ˜“å—å¤šç§å› ç´ å½±å“ã€‚æ ¹æ®ä¸´åºŠæŒ‡å—ï¼Œ<strong>éœ€å®šæœŸç›‘æµ‹å‡è¡€é…¶åŸæ—¶é—´å›½é™…æ ‡å‡†åŒ–æ¯”å€¼ï¼ˆINRï¼‰</strong>ä»¥è°ƒæ•´å‰‚é‡ï¼Œæœ‰æ•ˆé¢„é˜²å‡ºè¡€æˆ–è¡€æ “äº‹ä»¶ã€‚</p>
                    </div> -->
                    <div class="risk-card-suggestion">
                        <p>å»ºè®®ä¸ºæ‚£è€…è¿½åŠ å¼€å…· [å‡è¡€åŠŸèƒ½(PT/INR)] æ£€æŸ¥ã€‚å¦‚ä¸‹æ¬¡å¤è¯Šæ—¶ç›‘æµ‹ï¼Œè¯·åœ¨ç—…ç¨‹ä¸­æ³¨æ˜ã€‚</p>
                    </div>
                </div>
                
                <!-- é£é™©å¡ç‰‡äº”ï¼šä½é£é™© -->
                <div class="risk-card low">
                    <div class="risk-card-header">
                        <span class="risk-card-title low">ğŸ”µ ä½é£é™©æç¤º</span>
                        <span class="risk-card-drug"><a href="#" class="drug-link" onclick="showDrugRule('å¤æ–¹ç£·é…¸å¯å¾…å› æº¶æ¶²'); return false;">å¤æ–¹ç£·é…¸å¯å¾…å› æº¶æ¶²</a></span>
                        <span class="risk-card-rule">åˆç†ç”¨è¯ - è¯Šæ–­æ”¯æ’‘ä¸è¶³</span>
                    </div>
                    <div class="risk-card-content">
                        <p>å½“å‰è¯Šæ–­'æ€¥æ€§æ”¯æ°”ç®¡ç‚'ï¼Œä¸è¶³ä»¥å……åˆ†æ”¯æ’‘ä½¿ç”¨ä¸­æ¢æ€§é•‡å’³è¯ã€<a href="#" class="drug-link" onclick="showDrugRule('å¤æ–¹ç£·é…¸å¯å¾…å› æº¶æ¶²'); return false;">å¤æ–¹ç£·é…¸å¯å¾…å› æº¶æ¶²</a>ã€‘ã€‚</p>
                    </div>
                    <!-- <div class="risk-card-reason">
                        <p>å¤æ–¹ç£·é…¸å¯å¾…å› å«æœ‰éº»é†‰è¯å“æˆåˆ†ï¼Œå…·æœ‰æ½œåœ¨æˆç˜¾æ€§ã€‚ä¸´åºŠæŒ‡å—å»ºè®®ä»…åœ¨å¸¸è§„ç¥›ç—°ã€é•‡å’³æ²»ç–—æ— æ•ˆï¼Œä¸”å‰§çƒˆå¹²å’³ä¸¥é‡å½±å“ä¼‘æ¯æ—¶æ‰è€ƒè™‘çŸ­æœŸä½¿ç”¨ã€‚</p>
                    </div> -->
                    <div class="risk-card-suggestion">
                        <p>å»ºè®®åœ¨ç—…ç¨‹è®°å½•ä¸­è¯¦ç»†æè¿°å’³å—½çš„æ€§è´¨ã€é¢‘ç‡å’Œä¸¥é‡ç¨‹åº¦ï¼Œä»¥æ”¯æ’‘ç”¨è¯çš„åŒ»ç–—å¿…è¦æ€§ï¼›æˆ–è€ƒè™‘æ›´æ¢ä¸ºéä¸­æ¢æ€§/ééº»é†‰æ€§çš„é•‡å’³è¯ç‰©ï¼ˆå¦‚ï¼šå³ç¾æ²™èŠ¬ï¼‰ã€‚</p>
                    </div>
                </div>
                

            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="high-risk-submit">è°ƒæ•´å¤„æ–¹</button>
            </div>
        </div>
    </div>

    <!-- ä½é£é™©æ‚¬æµ®æç¤ºï¼ˆæ— å¹²æ‰°æ–¹å¼ï¼‰ -->
    <div class="low-risk-tooltip" id="low-risk-tooltip">
        <div class="tooltip-header">
            <h4><span class="risk-icon low">!</span>ä½é£é™©é¢„è­¦</h4>
            <div class="tooltip-timer" id="tooltip-timer"></div>
        </div>
        <div class="tooltip-content">
            <div class="patient-brief">
                <p>æ‚£è€…ï¼šç‹æ™“æ˜ (65å²/ç”·)</p>
                <p>è¯Šæ–­ï¼šå† å¿ƒç—…ã€é«˜è¡€å‹2çº§ã€2å‹ç³–å°¿ç—…ã€æ€¥æ€§æ”¯æ°”ç®¡ç‚</p>
            </div>
            <div class="risk-info">
                <p><strong>è½»åº¦ç”¨è¯é£é™©ï¼š</strong>è¾›ä¼ä»–æ±€ä¸æ°¯å¡æ ¼é›·è”åˆä½¿ç”¨å¯èƒ½å¢åŠ è‚Œè‚‰æŸä¼¤é£é™©</p>
            </div>
            <div class="risk-suggestion">
                <p><strong>å»ºè®®ï¼š</strong>å¯†åˆ‡ç›‘æµ‹æ‚£è€…è‚Œé…¸æ¿€é…¶ï¼ˆCKï¼‰æ°´å¹³</p>
            </div>
        </div>
        <div class="tooltip-footer">
            <button class="btn btn-xs btn-secondary" onclick="closeLowRiskTooltip()">å…³é—­</button>
            <button class="btn btn-xs btn-primary" onclick="showDetailedLowRisk()">æŸ¥çœ‹è¯¦æƒ…</button>
        </div>
    </div>

    <script>
        // åŠ è½½ç»Ÿä¸€ä¾§è¾¹æ 
        document.addEventListener('DOMContentLoaded', function() {
            const sidebarContainer = document.getElementById('sidebar-container');
            fetch('../ç»„ä»¶/_unified-sidebar.html')
                .then(response => response.text())
                .then(html => {
                    sidebarContainer.innerHTML = html;
                    // é«˜äº®å½“å‰èœå•
                    const currentMenuItem = document.querySelector('[data-menu="pre-warning"]');
                    if (currentMenuItem) {
                        currentMenuItem.classList.add('active');
                    }
                    // åˆå§‹åŒ–ä¾§è¾¹æ äº¤äº’
                    initSidebar();
                })
                .catch(error => {
                    console.error('åŠ è½½ä¾§è¾¹æ å¤±è´¥:', error);
                });
            
            // æ˜¾ç¤ºå½“å‰æ—¶é—´
            updateCurrentTime();
            setInterval(updateCurrentTime, 60000);
            
            // æŒ‰é’®ç‚¹å‡»äº‹ä»¶å·²ç›´æ¥åœ¨HTMLæ ‡ç­¾ä¸­é€šè¿‡onclickå±æ€§ç»‘å®š
        });
        
        // åˆå§‹åŒ–ä¾§è¾¹æ 
        function initSidebar() {
            // ä¾§è¾¹æ å±•å¼€/æŠ˜å é€»è¾‘
            const expandableItems = document.querySelectorAll('.nav-level-1.nav-expandable');
            expandableItems.forEach(item => {
                item.addEventListener('click', function() {
                    const navGroup = this.closest('.nav-group');
                    navGroup.classList.toggle('expanded');
                });
            });
        }
        
        // æ›´æ–°å½“å‰æ—¶é—´
        function updateCurrentTime() {
            const now = new Date();
            const timeElement = document.getElementById('current-time');
            if (timeElement) {
                timeElement.textContent = now.toLocaleTimeString('zh-CN');
            }
        }
        
        // æ˜¾ç¤ºå¼¹çª—
        function showModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'flex';
            }
        }
        
        // å…³é—­å¼¹çª—
        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'none';
            }
        }
        
        // æ˜¾ç¤ºè¯å“è§„åˆ™å¼¹çª—
        function showDrugRule(drugName) {
            const modal = document.getElementById('drug-rule-modal');
            const drugNameElement = document.getElementById('drug-name-display');
            const drugRulesElement = document.getElementById('drug-rules-content');
            const drugStatusElement = document.querySelector('.drug-status');
            
            // è®¾ç½®è¯å“åç§°
            drugNameElement.textContent = drugName;
            
            // æ¸…ç©ºå¹¶é‡æ–°è®¾ç½®è¯å“çŠ¶æ€æ ‡ç­¾
            drugStatusElement.innerHTML = '';
            drugStatusElement.innerHTML = '<span class="tag tag-info">å¤„æ–¹è¯</span><span class="tag tag-warning">éœ€å®¡æ ¸</span>';
            
            // æ ¹æ®è¯å“åç§°æ·»åŠ å¯¹åº”çš„åŒ»ä¿ç±»åˆ«æ ‡ç­¾
            if (drugName === 'è‹¯ç£ºé…¸æ°¨æ°¯åœ°å¹³ç‰‡') {
                drugStatusElement.innerHTML += '<span class="tag tag-medical-b">åŒ»ä¿ä¹™ç±»</span>';
            } else if (drugName === 'å¤´å­¢å…‹æ´›èƒ¶å›Š') {
                drugStatusElement.innerHTML += '<span class="tag tag-medical-a">åŒ»ä¿ç”²ç±»</span>';
            }
            
            // æ ¹æ®è¯å“åç§°ç”Ÿæˆå¯¹åº”çš„è§„åˆ™å†…å®¹
            let rulesHtml = '';
            
            if (drugName === 'å¤´å­¢å…‹æ´›èƒ¶å›Š') {
                rulesHtml = `
                    <div class="drug-rule-section">
                        <h4>é€‚åº”ç—‡</h4>
                        <ul class="drug-rule-list">
                            <li>ç”¨äºæ•æ„ŸèŒæ‰€è‡´çš„å‘¼å¸ç³»ç»Ÿã€æ³Œå°¿ç³»ç»Ÿã€è€³é¼»å–‰ç§‘åŠçš®è‚¤ã€è½¯ç»„ç»‡æ„ŸæŸ“ç­‰ã€‚</li>
                        </ul>
                    </div>
                    <div class="drug-rule-section">
                        <h4>ç¦å¿Œç—‡</h4>
                        <ul class="drug-rule-list">
                            <li>å¯¹æœ¬å“åŠå…¶ä»–å¤´å­¢èŒç´ ç±»è¿‡æ•è€…ç¦ç”¨ã€‚</li>
                            <li>å¯¹é’éœ‰ç´ ç±»ã€é’éœ‰ç´ è¡ç”Ÿç‰©æˆ–é’éœ‰èƒºæœ‰è¿‡æ•å²è€…æ…ç”¨ã€‚</li>
                        </ul>
                    </div>
                    <div class="drug-rule-section">
                        <h4>è¯ç‰©ç›¸äº’ä½œç”¨</h4>
                        <ul class="drug-rule-list">
                            <li>ä¸å¼ºåˆ©å°¿å‰‚ï¼ˆå¦‚å‘‹å¡ç±³ï¼‰ã€æŠ—è‚¿ç˜¤è¯ï¼ˆå¦‚å¡æ°®èŠ¥ï¼‰ã€æ°¨åŸºç³–è‹·ç±»æŠ—ç”Ÿç´ åŠå¤šç²˜èŒç´ Eç­‰åˆç”¨ï¼Œæœ‰å¢åŠ è‚¾æ¯’æ€§çš„å¯èƒ½ã€‚</li>
                            <li>ä¸ä¸™ç£ºèˆ’åˆç”¨ï¼Œå¯å»¶è¿Ÿæœ¬å“çš„æ’æ³„ã€‚</li>
                        </ul>
                    </div>
                    <div class="drug-rule-section">
                        <h4>æ³¨æ„äº‹é¡¹</h4>
                        <ul class="drug-rule-list">
                            <li>é•¿æœŸä½¿ç”¨æœ¬å“å¯è‡´èŒç¾¤å¤±è°ƒï¼Œå¼•å‘ç»§å‘æ€§æ„ŸæŸ“ã€‚</li>
                            <li>æœ‰èƒƒè‚ é“ç–¾ç—…å²è€…ï¼Œç‰¹åˆ«æ˜¯æºƒç–¡æ€§ç»“è‚ ç‚ã€å±€é™æ€§è‚ ç‚æˆ–æŠ—ç”Ÿç´ ç›¸å…³æ€§ç»“è‚ ç‚è€…æ…ç”¨ã€‚</li>
                        </ul>
                    </div>
                `;
            } else if (drugName === 'è‹¯ç£ºé…¸æ°¨æ°¯åœ°å¹³ç‰‡') {
                rulesHtml = `
                    <div class="drug-rule-section">
                        <h4>é€‚åº”ç—‡</h4>
                        <ul class="drug-rule-list">
                            <li>é«˜è¡€å‹ï¼ˆå•ç‹¬æˆ–ä¸å…¶ä»–è¯ç‰©åˆå¹¶ä½¿ç”¨ï¼‰ã€‚</li>
                            <li>å† å¿ƒç—…ï¼ˆæ…¢æ€§ç¨³å®šæ€§å¿ƒç»ç—›ã€è¡€ç®¡ç—‰æŒ›æ€§å¿ƒç»ç—›ã€ç»è¡€ç®¡é€ å½±è¯å®çš„å† å¿ƒç—…ï¼‰ã€‚</li>
                        </ul>
                    </div>
                    <div class="drug-rule-section">
                        <h4>ç¦å¿Œç—‡</h4>
                        <ul class="drug-rule-list">
                            <li>å¯¹äºŒæ°¢å¡å•¶ç±»è¯ç‰©æˆ–æœ¬å“ä¸­ä»»ä½•æˆåˆ†è¿‡æ•çš„ç—…äººç¦ç”¨ã€‚</li>
                        </ul>
                    </div>
                    <div class="drug-rule-section">
                        <h4>è¯ç‰©ç›¸äº’ä½œç”¨</h4>
                        <ul class="drug-rule-list">
                            <li>ä¸å…¶ä»–é™å‹è¯åˆç”¨æ—¶å¯åŠ å¼ºé™å‹ä½œç”¨ã€‚</li>
                            <li>ä¸é›Œæ¿€ç´ åˆç”¨æ—¶å¯å¢åŠ æ¶²ä½“æ½´ç•™è€Œå¢é«˜è¡€å‹ã€‚</li>
                        </ul>
                    </div>
                    <div class="drug-rule-section">
                        <h4>åŒ»ä¿è§„å®š</h4>
                        <ul class="drug-rule-list">
                            <li>é«˜è¡€å‹æ…¢ç—…é•¿å¤„æ–¹å•æ¬¡æœ€å¤šå¼€å…·75å¤©ç”¨é‡ã€‚</li>
                            <li>å±äºå›½å®¶åŒ»ä¿ç›®å½•ä¹™ç±»è¯å“ã€‚</li>
                        </ul>
                    </div>
                `;
            } else if (drugName === 'æ·è¯ºç»´ (è¥¿æ ¼åˆ—æ±€äºŒç”²åŒèƒç‰‡)') {
                rulesHtml = `
                    <div class="drug-rule-section">
                        <h4>é€‚åº”ç—‡</h4>
                        <ul class="drug-rule-list">
                            <li>é…åˆé¥®é£Ÿå’Œè¿åŠ¨æ²»ç–—ï¼Œç”¨äºç»äºŒç”²åŒèƒå•è¯æ²»ç–—è¡€ç³–ä»æ§åˆ¶ä¸ä½³æˆ–æ­£åœ¨æ¥å—äºŒè€…è”åˆæ²»ç–—çš„2å‹ç³–å°¿ç—…æ‚£è€…ã€‚</li>
                        </ul>
                    </div>
                    <div class="drug-rule-section">
                        <h4>ç¦å¿Œç—‡</h4>
                        <ul class="drug-rule-list">
                            <li>è‚¾ç—…æˆ–è‚¾åŠŸèƒ½å¼‚å¸¸ï¼Œå³è¡€æ¸…è‚Œé…æ°´å¹³â‰¥1.5mg/dLï¼ˆç”·æ€§ï¼‰ã€â‰¥1.4mg/dLï¼ˆå¥³æ€§ï¼‰ï¼Œæˆ–è‚Œé…æ¸…é™¤ç‡å¼‚å¸¸ã€‚</li>
                            <li>æ€¥æ€§æˆ–æ…¢æ€§ä»£è°¢æ€§é…¸ä¸­æ¯’ï¼ŒåŒ…æ‹¬æœ‰æˆ–æ— æ˜è¿·çš„ç³–å°¿ç—…é…®ç—‡é…¸ä¸­æ¯’ã€‚</li>
                            <li>å¯¹æœ¬å“ä¸­ä»»ä½•æˆåˆ†è¿‡æ•è€…ã€‚</li>
                        </ul>
                    </div>
                    <div class="drug-rule-section">
                        <h4>è¯ç‰©ç›¸äº’ä½œç”¨</h4>
                        <ul class="drug-rule-list">
                            <li>ä¸å…¶ä»–é™ç³–è¯åˆç”¨æ—¶ï¼Œå¯èƒ½ä¼šå¢åŠ ä½è¡€ç³–çš„é£é™©ã€‚</li>
                            <li>ä¸åˆ©ç¦å¹³åˆç”¨å¯èƒ½é™ä½è¥¿æ ¼åˆ—æ±€çš„ç–—æ•ˆã€‚</li>
                        </ul>
                    </div>
                    <div class="drug-rule-section">
                        <h4>æ³¨æ„äº‹é¡¹</h4>
                        <ul class="drug-rule-list">
                            <li>æœ¬å“å«æœ‰äºŒç”²åŒèƒæˆåˆ†ï¼Œä¸åº”ä¸å…¶ä»–å«äºŒç”²åŒèƒçš„è¯ç‰©åˆç”¨ï¼Œä»¥å…å¯¼è‡´äºŒç”²åŒèƒå‰‚é‡è¿‡å¤§ã€‚</li>
                            <li>å®šæœŸç›‘æµ‹è‚¾åŠŸèƒ½ã€‚</li>
                        </ul>
                    </div>
                `;
            } else if (drugName === 'ç›é…¸äºŒç”²åŒèƒç‰‡') {
                rulesHtml = `
                    <div class="drug-rule-section">
                        <h4>é€‚åº”ç—‡</h4>
                        <ul class="drug-rule-list">
                            <li>ç”¨äºå•çº¯é¥®é£Ÿæ§åˆ¶ä¸æ»¡æ„çš„2å‹ç³–å°¿ç—…ç—…äººï¼Œå°¤å…¶æ˜¯è‚¥èƒ–å’Œä¼´é«˜èƒ°å²›ç´ è¡€ç—‡è€…ã€‚</li>
                            <li>å¯ä¸ç£ºé…°è„²ç±»é™è¡€ç³–è¯åˆç”¨ï¼Œå…·ååŒä½œç”¨ã€‚</li>
                        </ul>
                    </div>
                    <div class="drug-rule-section">
                        <h4>ç¦å¿Œç—‡</h4>
                        <ul class="drug-rule-list">
                            <li>2å‹ç³–å°¿ç—…ä¼´æœ‰é…®ç—‡é…¸ä¸­æ¯’ã€è‚è‚¾åŠŸèƒ½ä¸å…¨ã€å¿ƒåŠ›è¡°ç«­ã€æ€¥æ€§å¿ƒè‚Œæ¢—æ­»ã€ä¸¥é‡æ„ŸæŸ“å’Œå¤–ä¼¤ã€é‡å¤§æ‰‹æœ¯ä»¥åŠä¸´åºŠæœ‰ä½è¡€å‹å’Œç¼ºæ°§æƒ…å†µã€‚</li>
                            <li>ç³–å°¿ç—…åˆå¹¶ä¸¥é‡çš„æ…¢æ€§å¹¶å‘ç—‡ï¼ˆå¦‚ç³–å°¿ç—…è‚¾ç—…ã€ç³–å°¿ç—…çœ¼åº•ç—…å˜ï¼‰ã€‚</li>
                            <li>å¯¹æœ¬å“è¿‡æ•è€…ã€‚</li>
                        </ul>
                    </div>
                    <div class="drug-rule-section">
                        <h4>æ³¨æ„äº‹é¡¹</h4>
                        <ul class="drug-rule-list">
                            <li>å®šæœŸæ£€æŸ¥è‚¾åŠŸèƒ½ã€è‚åŠŸèƒ½å’Œè¡€ç³–ã€‚</li>
                            <li>æ—¢å¾€æœ‰ä¹³é…¸æ€§é…¸ä¸­æ¯’å²è€…æ…ç”¨ã€‚</li>
                            <li>ä¸èƒ°å²›ç´ åˆç”¨æ²»ç–—æ—¶ï¼Œé˜²æ­¢å‡ºç°ä½è¡€ç³–ååº”ã€‚</li>
                        </ul>
                    </div>
                `;
            } else if (drugName === 'åæ³•æ—é’ ç‰‡') {
                rulesHtml = `
                    <div class="drug-rule-section">
                        <h4>é€‚åº”ç—‡</h4>
                        <ul class="drug-rule-list">
                            <li>é¢„é˜²åŠæ²»ç–—æ·±é™è„‰è¡€æ “åŠè‚ºæ “å¡ã€‚</li>
                            <li>é¢„é˜²å¿ƒè‚Œæ¢—å¡åè¡€æ “æ “å¡å¹¶å‘ç—‡ï¼ˆå’ä¸­æˆ–ä½“å¾ªç¯æ “å¡ï¼‰ã€‚</li>
                            <li>é¢„é˜²æˆ¿é¢¤ã€å¿ƒè„ç“£è†œç½®æ¢æœ¯åå¼•èµ·çš„è¡€æ “æ “å¡å¹¶å‘ç—‡ï¼ˆå’ä¸­æˆ–ä½“å¾ªç¯æ “å¡ï¼‰ã€‚</li>
                        </ul>
                    </div>
                    <div class="drug-rule-section">
                        <h4>ç¦å¿Œç—‡</h4>
                        <ul class="drug-rule-list">
                            <li>è‚è‚¾åŠŸèƒ½æŸå®³ã€ä¸¥é‡é«˜è¡€å‹ã€å‡è¡€åŠŸèƒ½éšœç¢ä¼´æœ‰å‡ºè¡€å€¾å‘ã€æ´»åŠ¨æ€§æºƒç–¡ã€å¤–ä¼¤ã€å…ˆå…†æµäº§ã€è¿‘æœŸæ‰‹æœ¯è€…ç¦ç”¨ã€‚</li>
                            <li>å¦Šå¨ æœŸç¦ç”¨ã€‚</li>
                        </ul>
                    </div>
                    <div class="drug-rule-section">
                        <h4>è¯ç‰©ç›¸äº’ä½œç”¨</h4>
                        <ul class="drug-rule-list">
                            <li>ä¸é˜¿å¸åŒ¹æ—ã€éç”¾ä½“æŠ—ç‚è¯ã€å³æ—‹ç³–é…ç­‰åˆç”¨ï¼Œå¯å¢å¼ºåæ³•æ—çš„æŠ—å‡ä½œç”¨ã€‚</li>
                            <li>ä¸è‚è¯é…¶è¯±å¯¼å‰‚ï¼ˆå¦‚è‹¯å·´æ¯”å¦¥ã€è‹¯å¦¥è‹±é’ ç­‰ï¼‰åˆç”¨ï¼Œå¯å‡å¼±åæ³•æ—çš„æŠ—å‡ä½œç”¨ã€‚</li>
                        </ul>
                    </div>
                    <div class="drug-rule-section">
                        <h4>ç›‘æµ‹è¦æ±‚</h4>
                        <ul class="drug-rule-list">
                            <li><strong>å¿…é¡»å®šæœŸç›‘æµ‹å‡è¡€é…¶åŸæ—¶é—´å›½é™…æ ‡å‡†åŒ–æ¯”å€¼ï¼ˆINRï¼‰</strong>ï¼Œç›®æ ‡å€¼é€šå¸¸ä¸º2.0-3.0ã€‚</li>
                            <li>æ²»ç–—åˆæœŸåº”æ¯æ—¥æˆ–éš”æ—¥æµ‹å®šINRï¼Œç¨³å®šåå¯æ¯å‘¨æµ‹å®šä¸€æ¬¡ï¼Œå†ç¨³å®šåå¯æ¯æœˆæµ‹å®šä¸€æ¬¡ã€‚</li>
                        </ul>
                    </div>
                `;
            } else if (drugName === 'è¾›ä¼ä»–æ±€ç‰‡') {
                rulesHtml = `
                    <div class="drug-rule-section">
                        <h4>é€‚åº”ç—‡</h4>
                        <ul class="drug-rule-list">
                            <li>ç”¨äºé«˜èƒ†å›ºé†‡è¡€ç—‡ã€å† å¿ƒç—…ç­‰ç–¾ç—…çš„æ²»ç–—ã€‚</li>
                        </ul>
                    </div>
                    <div class="drug-rule-section">
                        <h4>ç¦å¿Œç—‡</h4>
                        <ul class="drug-rule-list">
                            <li>å¯¹æœ¬å“è¿‡æ•è€…ç¦ç”¨ã€‚</li>
                            <li>æ´»åŠ¨æ€§è‚ç—…æˆ–ä¸æ˜åŸå› è¡€æ°¨åŸºè½¬ç§»é…¶æŒç»­å‡é«˜çš„æ‚£è€…ç¦ç”¨ã€‚</li>
                            <li>å­•å¦‡åŠå“ºä¹³æœŸå¦‡å¥³ç¦ç”¨ã€‚</li>
                        </ul>
                    </div>
                    <div class="drug-rule-section">
                        <h4>è¯ç‰©ç›¸äº’ä½œç”¨</h4>
                        <ul class="drug-rule-list">
                            <li>ä¸æ°¯å¡æ ¼é›·åˆç”¨å¯èƒ½å¢åŠ è‚Œè‚‰æŸä¼¤é£é™©ã€‚</li>
                            <li>ä¸çº¢éœ‰ç´ ã€å…‹æ‹‰éœ‰ç´ ç­‰å¤§ç¯å†…é…¯ç±»æŠ—ç”Ÿç´ åˆç”¨å¯èƒ½å¢åŠ è‚Œç—…é£é™©ã€‚</li>
                        </ul>
                    </div>
                `;
            } else if (drugName === 'æ°¯å¡æ ¼é›·ç‰‡') {
                rulesHtml = `
                    <div class="drug-rule-section">
                        <h4>é€‚åº”ç—‡</h4>
                        <ul class="drug-rule-list">
                            <li>ç”¨äºå¿ƒè‚Œæ¢—æ­»ã€ç¼ºè¡€æ€§å’ä¸­ã€å¤–å‘¨åŠ¨è„‰æ€§ç–¾ç—…ã€æ€¥æ€§å† è„‰ç»¼åˆå¾ç­‰ã€‚</li>
                        </ul>
                    </div>
                    <div class="drug-rule-section">
                        <h4>ç¦å¿Œç—‡</h4>
                        <ul class="drug-rule-list">
                            <li>å¯¹æœ¬å“è¿‡æ•è€…ç¦ç”¨ã€‚</li>
                            <li>ä¸¥é‡è‚è„æŸå®³æ‚£è€…ç¦ç”¨ã€‚</li>
                        </ul>
                    </div>
                    <div class="drug-rule-section">
                        <h4>è¯ç‰©ç›¸äº’ä½œç”¨</h4>
                        <ul class="drug-rule-list">
                            <li>ä¸è¾›ä¼ä»–æ±€åˆç”¨å¯èƒ½å¢åŠ è‚Œè‚‰æŸä¼¤é£é™©ã€‚</li>
                            <li>ä¸å¥¥ç¾æ‹‰å”‘ç­‰è´¨å­æ³µæŠ‘åˆ¶å‰‚åˆç”¨å¯èƒ½é™ä½ç–—æ•ˆã€‚</li>
                        </ul>
                    </div>
                `;
            } else if (drugName === 'å¤æ–¹ç£·é…¸å¯å¾…å› æº¶æ¶²') {
                rulesHtml = `
                    <div class="drug-rule-section">
                        <h4>é€‚åº”ç—‡</h4>
                        <ul class="drug-rule-list">
                            <li>ç”¨äºæ„Ÿå†’ã€æµè¡Œæ€§æ„Ÿå†’ç­‰ç—…å¼•èµ·çš„å’³å—½ã€‚</li>
                            <li>ç”¨äºåˆºæ¿€æ€§å¹²å’³ï¼Œå°¤å…¶é€‚ç”¨äºä¼´æœ‰èƒ¸ç—›çš„å‰§çƒˆå’³å—½ã€‚</li>
                        </ul>
                    </div>
                    <div class="drug-rule-section">
                        <h4>ç¦å¿Œç—‡</h4>
                        <ul class="drug-rule-list">
                            <li>å¯¹æœ¬å“æˆåˆ†è¿‡æ•è€…ç¦ç”¨ã€‚</li>
                            <li>å“ºä¹³æœŸå¦‡å¥³ç¦ç”¨ã€‚</li>
                            <li>18å²ä»¥ä¸‹é’å°‘å¹´å„¿ç«¥ç¦ç”¨ã€‚</li>
                            <li>æ‚£æœ‰ä¸¥é‡é«˜è¡€å‹ã€å† å¿ƒç—…æˆ–æ­£æœç”¨å•èƒºæ°§åŒ–é…¶æŠ‘åˆ¶å‰‚çš„æ‚£è€…ç¦ç”¨ã€‚</li>
                        </ul>
                    </div>
                    <div class="drug-rule-section">
                        <h4>æ³¨æ„äº‹é¡¹</h4>
                        <ul class="drug-rule-list">
                            <li>æœ¬å“å«æœ‰éº»é†‰è¯å“æˆåˆ†ï¼ˆå¯å¾…å› ï¼‰ï¼Œå…·æœ‰æ½œåœ¨æˆç˜¾æ€§ï¼Œåº”ä¸¥æ ¼æ§åˆ¶ä½¿ç”¨å‰‚é‡å’Œç–—ç¨‹ã€‚</li>
                            <li>ä¸´åºŠæŒ‡å—å»ºè®®ä»…åœ¨å¸¸è§„ç¥›ç—°ã€é•‡å’³æ²»ç–—æ— æ•ˆï¼Œä¸”å‰§çƒˆå¹²å’³ä¸¥é‡å½±å“ä¼‘æ¯æ—¶æ‰è€ƒè™‘çŸ­æœŸä½¿ç”¨ã€‚</li>
                            <li>åº”åœ¨ç—…ç¨‹è®°å½•ä¸­è¯¦ç»†æè¿°å’³å—½çš„æ€§è´¨ã€é¢‘ç‡å’Œä¸¥é‡ç¨‹åº¦ï¼Œä»¥æ”¯æ’‘ç”¨è¯çš„åŒ»ç–—å¿…è¦æ€§ã€‚</li>
                        </ul>
                    </div>
                    <div class="drug-rule-section">
                        <h4>æ›¿ä»£è¯ç‰©</h4>
                        <ul class="drug-rule-list">
                            <li>å¯è€ƒè™‘ä½¿ç”¨éä¸­æ¢æ€§/ééº»é†‰æ€§çš„é•‡å’³è¯ç‰©ï¼Œå¦‚å³ç¾æ²™èŠ¬ã€‚</li>
                            <li>å¯¹äºæœ‰ç—°å’³å—½ï¼Œåº”ä¼˜å…ˆä½¿ç”¨ç¥›ç—°è¯è€Œéé•‡å’³è¯ã€‚</li>
                        </ul>
                    </div>
                `;
            } else {
                rulesHtml = `
                    <div class="drug-rule-section">
                        <h4>è¯å“ä¿¡æ¯</h4>
                        <ul class="drug-rule-list">
                            <li>æš‚æ— è¯¥è¯å“çš„è¯¦ç»†è§„åˆ™ä¿¡æ¯ã€‚</li>
                            <li>è¯·å‚è€ƒè¯å“è¯´æ˜ä¹¦æˆ–å’¨è¯¢ä¸´åºŠè¯å¸ˆã€‚</li>
                        </ul>
                    </div>
                `;
            }
            
            // è®¾ç½®è§„åˆ™å†…å®¹
            drugRulesElement.innerHTML = rulesHtml;
            
            // æ˜¾ç¤ºå¼¹çª—
            modal.style.display = 'flex';
        }
        
        // æ˜¾ç¤ºä½é£é™©æ‚¬æµ®æç¤ºï¼ˆæ— å¹²æ‰°æ¨¡å¼ï¼‰
        function showLowRiskTooltip() {
            const tooltip = document.getElementById('low-risk-tooltip');
            const btn = document.getElementById('low-risk-btn');
            const timer = document.getElementById('tooltip-timer');
            
            // è®¡ç®—æç¤ºæ¡†ä½ç½®
            const rect = btn.getBoundingClientRect();
            tooltip.style.top = `${rect.bottom + 10}px`;
            tooltip.style.left = `${rect.left}px`;
            
            // æ˜¾ç¤ºæç¤ºæ¡†
            tooltip.style.display = 'block';
            
            // é‡ç½®è®¡æ—¶å™¨å®½åº¦
            timer.style.width = '100%';
            
            // è®¾ç½®8ç§’è‡ªåŠ¨æ¶ˆå¤±å€’è®¡æ—¶
            const totalTime = 8000;
            const interval = 50;
            const step = (interval / totalTime) * 100;
            let currentWidth = 100;
            
            const countdown = setInterval(() => {
                currentWidth -= step;
                timer.style.width = `${currentWidth}%`;
                
                if (currentWidth <= 0) {
                    clearInterval(countdown);
                    tooltip.style.display = 'none';
                }
            }, interval);
            
            // æ‚¬åœæ—¶æš‚åœè®¡æ—¶ï¼Œç§»å¼€æ—¶ç»§ç»­è®¡æ—¶
            let isPaused = false;
            let remainingTime = totalTime;
            
            tooltip.addEventListener('mouseenter', function() {
                if (!isPaused) {
                    clearInterval(countdown);
                    remainingTime = currentWidth * totalTime / 100;
                    isPaused = true;
                }
            });
            
            tooltip.addEventListener('mouseleave', function() {
                if (isPaused) {
                    isPaused = false;
                    const newCountdown = setInterval(() => {
                        remainingTime -= interval;
                        currentWidth = (remainingTime / totalTime) * 100;
                        timer.style.width = `${currentWidth}%`;
                        
                        if (remainingTime <= 0) {
                            clearInterval(newCountdown);
                            tooltip.style.display = 'none';
                        }
                    }, interval);
                }
            });
        }
        
        // å…³é—­ä½é£é™©æ‚¬æµ®æç¤º
        function closeLowRiskTooltip() {
            const tooltip = document.getElementById('low-risk-tooltip');
            tooltip.style.display = 'none';
        }
        
        // æ˜¾ç¤ºä½é£é™©è¯¦æƒ…å¼¹çª—
        function showDetailedLowRisk() {
            closeLowRiskTooltip();
            showModal('low-risk-modal');
        }
        
        // é«˜é£é™©å¼¹çª—äºŒæ¬¡ç¡®è®¤é€»è¾‘
        document.addEventListener('DOMContentLoaded', function() {
            if (document.getElementById('high-risk-submit')) {
                document.getElementById('high-risk-submit').addEventListener('click', function() {
                    // ç‚¹å‡»æŒ‰é’®åªå…³é—­å½“å‰å¼¹çª—ï¼Œä¸å†æ˜¾ç¤ºå…¶ä»–æç¤º
                    closeModal('high-risk-modal');
                });
            }
        });
        
        // ä¿å­˜å¤„æ–¹
        function savePrescription() {
            // ç›´æ¥å…³é—­å½“å‰å¼¹çª—ï¼Œä¸å†æ˜¾ç¤ºå…¶ä»–æç¤º
            closeModal('low-risk-modal');
        }
        
        // æ·»åŠ è¯å“
        function addMedication() {
            const name = document.getElementById('medication-name').value;
            const dose = document.getElementById('medication-dose').value;
            const unit = document.getElementById('medication-unit').value;
            const usage = document.getElementById('medication-usage').value;
            const frequency = document.getElementById('medication-frequency').value;
            
            if (name && dose && usage && frequency) {
                const tableBody = document.getElementById('medication-list');
                const newRow = document.createElement('tr');
                const randomPrice = (Math.random() * 50 + 5).toFixed(2);
                
                newRow.innerHTML = `
                    <td>${name}</td>
                    <td>${dose}${unit}</td>
                    <td>${usage}</td>
                    <td>${frequency}</td>
                    <td>Â¥${randomPrice}</td>
                    <td><button class="btn btn-secondary" onclick="removeMedication(this)">åˆ é™¤</button></td>
                `;
                
                tableBody.appendChild(newRow);
                
                // æ¸…ç©ºè¾“å…¥æ¡†
                document.getElementById('medication-name').value = '';
                document.getElementById('medication-dose').value = '';
                document.getElementById('medication-usage').value = '';
                document.getElementById('medication-frequency').value = '';
            } else {
                alert('è¯·å¡«å†™å®Œæ•´çš„è¯å“ä¿¡æ¯');
            }
        }
        
        // åˆ é™¤è¯å“
        function removeMedication(button) {
            const row = button.closest('tr');
            row.remove();
        }
        
        // è°ƒæ•´å¤„æ–¹
        function adjustPrescription() {
            closeModal('medium-risk-modal');
        }
        
        // æ¸…ç©ºå¤„æ–¹
        function clearPrescription() {
            const tableBody = document.getElementById('medication-list');
            tableBody.innerHTML = '';
        }
        
        // ä¸­é£é™©å¼¹çª— - å¿½ç•¥å¹¶ä¿å­˜æ“ä½œ
        function ignoreAndSave() {
            // æ˜¾ç¤ºæç¤ºä¿¡æ¯
            alert('è°ƒç”¨hiså¤„æ–¹ä¿å­˜æ¥å£ï¼Œä¸å†è¿›è¡Œæ‹¦æˆª');
            // å…³é—­å¼¹çª—
            closeModal('medium-risk-modal');
        }
        
        // ä½é£é™©å¼¹çª— - ç»§ç»­ä¿å­˜æ“ä½œ
        function continueAndSave() {
            // æ˜¾ç¤ºæç¤ºä¿¡æ¯
            alert('è°ƒç”¨hiså¤„æ–¹ä¿å­˜æ¥å£ï¼Œä¸å†è¿›è¡Œæ‹¦æˆª');
            // å…³é—­å¼¹çª—
            closeModal('low-risk-modal');
        }
        
        // ç‚¹å‡»ç©ºç™½å¤„å…³é—­å¼¹çª—
        window.addEventListener('click', function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        });
    </script>
        
        <!-- è¯å“è§„åˆ™å¼¹çª— -->
        <div class="modal" id="drug-rule-modal" style="display: none;">
            <div class="modal-content drug-rule-modal-content">
                <div class="modal-header">
                    <h3 class="modal-title"><span class="risk-icon medium">!</span>è¯å“è§„åˆ™è¯¦æƒ…</h3>
                    <button class="modal-close" onclick="closeModal('drug-rule-modal')">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="drug-info-header">
                        <h2 class="drug-name-large" id="drug-name-display"></h2>
                        <div class="drug-status">
                            <!-- è¯å“çŠ¶æ€æ ‡ç­¾å°†é€šè¿‡JavaScriptåŠ¨æ€å¡«å…… -->
                        </div>
                    </div>
                    
                    <!-- è¯å“è§„åˆ™å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€å¡«å…… -->
                    <div id="drug-rules-content"></div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" onclick="closeModal('drug-rule-modal')">å…³é—­</button>
                </div>
            </div>
        </div>
    </body>
</html>