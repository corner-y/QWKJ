<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>申诉处理详情页 - 医保审核系统</title>
    <link rel="stylesheet" href="../../样式文件/通用样式.css">
    <link rel="stylesheet" href="../../样式文件/审核记录样式.css">
    <link rel="stylesheet" href="../../样式文件/unified-sidebar.css">
    <style>
        /* 申诉处理详情页特定样式 */
        .dashboard-header {
            background: white;
            padding: 20px;
            border-bottom: 1px solid #e0e0e0;
            margin-bottom: 20px;
        }
        
        .dashboard-title {
            font-size: 24px;
            font-weight: 600;
            color: #2c3e50;
            margin: 0;
        }
        
        .dashboard-subtitle {
            color: #7f8c8d;
            margin-top: 8px;
            font-size: 14px;
        }
        
        .content-container {
            padding: 0 20px 20px 20px;
        }
        
        .comparison-layout {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .comparison-column {
            flex: 1;
            min-width: 0;
        }
        
        /* 通用卡片样式 */
        .card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }
        
        .card-title {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        /* 案件基本信息 */
        .case-info-item {
            display: flex;
            margin-bottom: 12px;
        }
        
        .case-info-label {
            width: 100px;
            color: #7f8c8d;
            font-weight: 500;
            flex-shrink: 0;
        }
        
        .case-info-value {
            flex: 1;
            color: #2c3e50;
        }
        
        /* 违规判定详情 */
        .violation-details {
            margin-top: 16px;
        }
        
        .violation-item {
            padding: 16px;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            margin-bottom: 16px;
            background: #f8f9fa;
        }
        
        .violation-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .violation-type {
            font-weight: 500;
            color: #e74c3c;
        }
        
        .violation-date {
            color: #7f8c8d;
            font-size: 13px;
        }
        
        .violation-reason {
            font-size: 14px;
            color: #34495e;
            line-height: 1.6;
            margin-bottom: 12px;
        }
        
        .violation-evidence {
            background: #f1f2f6;
            padding: 12px;
            border-radius: 4px;
            font-size: 13px;
            color: #57606f;
        }
        
        .violation-evidence-title {
            font-weight: 500;
            margin-bottom: 8px;
            color: #2f3542;
        }
        
        .violation-evidence-list {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }
        
        .violation-evidence-list li {
            padding: 4px 0;
            padding-left: 16px;
            position: relative;
        }
        
        .violation-evidence-list li:before {
            content: "•";
            position: absolute;
            left: 0;
            color: #e74c3c;
        }
        
        /* 专家意见 */
        .expert-opinion {
            background: #f8f9fa;
            border-left: 4px solid #3498db;
            padding: 16px;
            border-radius: 0 4px 4px 0;
            font-size: 14px;
            line-height: 1.6;
            color: #34495e;
            margin-top: 16px;
        }
        
        /* 申诉材料 */
        .appeal-reason {
            background: #f8f9fa;
            padding: 16px;
            border-radius: 4px;
            font-size: 14px;
            line-height: 1.6;
            color: #34495e;
            margin-top: 16px;
            border: 1px solid #dfe4ea;
        }
        
        .evidence-files {
            margin-top: 20px;
        }
        
        .evidence-file-list {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }
        
        .evidence-file-item {
            display: flex;
            align-items: center;
            padding: 12px;
            border: 1px solid #dfe4ea;
            border-radius: 4px;
            margin-bottom: 8px;
            background: white;
        }
        
        .evidence-file-icon {
            font-size: 20px;
            margin-right: 12px;
            color: #3498db;
        }
        
        .evidence-file-info {
            flex: 1;
        }
        
        .evidence-file-name {
            font-weight: 500;
            color: #2c3e50;
            margin-bottom: 4px;
        }
        
        .evidence-file-meta {
            font-size: 12px;
            color: #7f8c8d;
        }
        
        .evidence-file-actions {
            margin-left: 12px;
        }
        
        .btn-view-file {
            background: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 6px 12px;
            font-size: 12px;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .btn-view-file:hover {
            background: #2980b9;
        }
        
        /* 裁定区域 */
        .verdict-section {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }
        
        .verdict-title {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
        }
        
        .verdict-radio-group {
            margin-bottom: 20px;
        }
        
        .verdict-radio {
            display: flex;
            align-items: center;
            margin-bottom: 16px;
            cursor: pointer;
        }
        
        .verdict-radio input[type="radio"] {
            margin-right: 12px;
        }
        
        .verdict-radio label {
            cursor: pointer;
            color: #2c3e50;
            font-size: 16px;
        }
        
        .verdict-textarea {
            width: 100%;
            min-height: 150px;
            padding: 12px;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            font-size: 14px;
            font-family: inherit;
            resize: vertical;
        }
        
        .verdict-textarea:focus {
            outline: none;
            border-color: #3498db;
        }
        
        .verdict-actions {
            margin-top: 20px;
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }
        
        /* 按钮通用样式 */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }
        
        .btn-primary {
            background: #3498db;
            color: white;
        }
        
        .btn-primary:hover {
            background: #2980b9;
        }
        
        .btn-secondary {
            background: #ecf0f1;
            color: #2c3e50;
        }
        
        .btn-secondary:hover {
            background: #bdc3c7;
        }
        
        /* 文件预览模态框 */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.8);
        }
        
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow: auto;
            border-radius: 8px;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .modal-title {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            margin: 0;
        }
        
        .close-modal {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .close-modal:hover,
        .close-modal:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }
        
        /* 移动端适配 */
        @media (max-width: 992px) {
            .comparison-layout {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- 引入统一侧边栏 -->
    <div id="sidebar-container">
        <div class="sidebar">
            <div class="sidebar-header">
                <h2 class="sidebar-logo">医保审核系统</h2>
                <p class="sidebar-subtitle">超级管理员平台</p>
            </div>
            <div class="sidebar-nav">
                <!-- 侧边栏内容将通过脚本加载 -->
            </div>
        </div>
    </div>

    <!-- 主内容区域 -->
    <div class="main-content">
        <div class="dashboard-header">
            <div>
                <h1 class="dashboard-title">申诉处理</h1>
                <p class="dashboard-subtitle">对医院提出的申诉进行复核与最终裁定</p>
            </div>
        </div>

        <!-- 双栏对比式布局 -->
        <div class="content-container">
            <div class="comparison-layout">
                <!-- 左侧栏 - 原始违规判定 -->
                <div class="comparison-column">
                    <div class="card">
                        <h3 class="card-title">原始违规判定详情</h3>
                        
                        <!-- 案件基本信息 -->
                        <div class="case-info-item">
                            <span class="case-info-label">申诉ID：</span>
                            <span class="case-info-value">A-001</span>
                        </div>
                        <div class="case-info-item">
                            <span class="case-info-label">涉及医院：</span>
                            <span class="case-info-value">北京协和医院</span>
                        </div>
                        <div class="case-info-item">
                            <span class="case-info-label">患者信息：</span>
                            <span class="case-info-value">陈*, 420...05A</span>
                        </div>
                        <div class="case-info-item">
                            <span class="case-info-label">违规类型：</span>
                            <span class="case-info-value">分解住院</span>
                        </div>
                        <div class="case-info-item">
                            <span class="case-info-label">判定日期：</span>
                            <span class="case-info-value">2024-10-15</span>
                        </div>
                        
                        <!-- 违规判定详情 -->
                        <div class="violation-details">
                            <div class="violation-item">
                                <div class="violation-header">
                                    <div class="violation-type">分解住院</div>
                                    <div class="violation-date">2024-10-15</div>
                                </div>
                                <div class="violation-reason">
                                    患者在2024年10月5日至2024年10月15日期间，先后两次住院治疗同一疾病（肺炎），间隔时间仅3天，且出院诊断与入院诊断基本一致，存在分解住院嫌疑。
                                </div>
                                <div class="violation-evidence">
                                    <div class="violation-evidence-title">判定依据：</div>
                                    <ul class="violation-evidence-list">
                                        <li>两次住院时间间隔过短（仅3天）</li>
                                        <li>两次住院诊断均为肺炎，且症状无明显加重</li>
                                        <li>第二次住院治疗方案与第一次基本相同</li>
                                        <li>第二次住院费用较第一次显著增加</li>
                                        <li>患者病历中未记录必须再次住院的特殊情况</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <!-- 系统判定依据 -->
                            <div class="expert-opinion">
                                <strong>系统判定依据：</strong><br>
                                根据《医保住院管理办法》第四章第二十三条，同一疾病在30天内原则上不得重复住院，特殊情况需提供详细说明。本次案例中，患者两次住院时间间隔仅3天，且无特殊情况说明，系统判定为分解住院违规。
                            </div>
                            
                            <!-- 专家意见 -->
                            <div class="expert-opinion">
                                <strong>专家意见：</strong><br>
                                经核查，患者两次住院的病情并未出现明显变化或新的并发症，出院记录中也未提及需要短期内再次住院的医疗必要性。综合判断，符合分解住院的特征，建议认定为违规，追回医保基金 ¥3,500.00。
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 右侧栏 - 医院申诉材料 -->
                <div class="comparison-column">
                    <div class="card">
                        <h3 class="card-title">医院申诉详情</h3>
                        
                        <!-- 申诉基本信息 -->
                        <div class="case-info-item">
                            <span class="case-info-label">申诉医院：</span>
                            <span class="case-info-value">北京协和医院</span>
                        </div>
                        <div class="case-info-item">
                            <span class="case-info-label">申诉日期：</span>
                            <span class="case-info-value">2024-10-20</span>
                        </div>
                        <div class="case-info-item">
                            <span class="case-info-label">申诉联系人：</span>
                            <span class="case-info-value">李医生（医保办）</span>
                        </div>
                        <div class="case-info-item">
                            <span class="case-info-label">联系方式：</span>
                            <span class="case-info-value">010-12345678</span>
                        </div>
                        
                        <!-- 医院申诉理由 -->
                        <div class="appeal-reason">
                            <strong>医院申诉理由：</strong><br><br>
                            患者陈先生因肺炎于2024年10月5日入院治疗，经初步治疗后症状有所缓解，但未完全康复。患者因个人原因（家中有事）强烈要求出院，并签署了《自动出院知情同意书》。出院后3天，患者症状加重，再次就诊，经检查确需住院继续治疗。<br><br>
                            我院认为，本次案例不属于分解住院，而是患者因特殊情况中断治疗后病情反复所致。我们已提供完整的病程记录、患者签署的自动出院同意书以及第二次住院的详细检查报告，证明两次住院均有充分的医疗必要性。
                        </div>
                        
                        <!-- 医院补充证据 -->
                        <div class="evidence-files">
                            <h4 style="font-size: 16px; color: #2c3e50; margin-bottom: 12px;">医院补充证据</h4>
                            <ul class="evidence-file-list">
                                <li class="evidence-file-item">
                                    <span class="evidence-file-icon">📄</span>
                                    <div class="evidence-file-info">
                                        <div class="evidence-file-name">患者自动出院知情同意书</div>
                                        <div class="evidence-file-meta">PDF, 256KB, 2024-10-08</div>
                                    </div>
                                    <div class="evidence-file-actions">
                                        <button class="btn-view-file" onclick="previewFile('自动出院知情同意书')">预览</button>
                                    </div>
                                </li>
                                <li class="evidence-file-item">
                                    <span class="evidence-file-icon">📄</span>
                                    <div class="evidence-file-info">
                                        <div class="evidence-file-name">第二次住院病程记录</div>
                                        <div class="evidence-file-meta">PDF, 432KB, 2024-10-12</div>
                                    </div>
                                    <div class="evidence-file-actions">
                                        <button class="btn-view-file" onclick="previewFile('第二次住院病程记录')">预览</button>
                                    </div>
                                </li>
                                <li class="evidence-file-item">
                                    <span class="evidence-file-icon">📊</span>
                                    <div class="evidence-file-info">
                                        <div class="evidence-file-name">第二次住院检查报告</div>
                                        <div class="evidence-file-meta">PDF, 578KB, 2024-10-10</div>
                                    </div>
                                    <div class="evidence-file-actions">
                                        <button class="btn-view-file" onclick="previewFile('第二次住院检查报告')">预览</button>
                                    </div>
                                </li>
                                <li class="evidence-file-item">
                                    <span class="evidence-file-icon">📝</span>
                                    <div class="evidence-file-info">
                                        <div class="evidence-file-name">主治医生情况说明</div>
                                        <div class="evidence-file-meta">DOCX, 156KB, 2024-10-18</div>
                                    </div>
                                    <div class="evidence-file-actions">
                                        <button class="btn-view-file" onclick="previewFile('主治医生情况说明')">预览</button>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 底部 - 医保局最终裁定区 -->
            <div class="verdict-section">
                <h3 class="verdict-title">申诉复核裁定</h3>
                <div class="verdict-radio-group">
                    <div class="verdict-radio">
                        <input type="radio" id="verdict-1" name="verdict" value="upheld">
                        <label for="verdict-1">申诉成立，撤销原违规判定</label>
                    </div>
                    <div class="verdict-radio">
                        <input type="radio" id="verdict-2" name="verdict" value="rejected" checked>
                        <label for="verdict-2">申诉驳回，维持原判</label>
                    </div>
                </div>
                <div>
                    <label for="verdictOpinion" style="display: block; margin-bottom: 8px; font-weight: 500; color: #2c3e50;">裁定意见</label>
                    <textarea id="verdictOpinion" class="verdict-textarea" placeholder="请填写详细的裁定理由。">经审核医院提供的补充材料，虽然患者签署了自动出院同意书，但两次住院时间间隔过短（仅3天），且第二次住院诊断与治疗方案与第一次基本一致。根据《医保住院管理办法》相关规定，同一疾病在30天内原则上不得重复住院，特殊情况需提供更充分的医疗必要性证明。因此，维持原违规判定，认定为分解住院，追回医保基金¥3,500.00。</textarea>
                </div>
                <div class="verdict-actions">
                    <button class="btn btn-secondary" onclick="goBack()">返回</button>
                    <button class="btn btn-primary" onclick="submitVerdict()">提交裁定结果</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 文件预览模态框 -->
    <div id="filePreviewModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modalFileName">文件预览</h3>
                <span class="close-modal" onclick="closeModal()">&times;</span>
            </div>
            <div id="modalFileContent">
                <!-- 预览内容将通过脚本动态填充 -->
                <p style="text-align: center; color: #7f8c8d; padding: 40px;">文件预览内容将显示在此处...</p>
            </div>
        </div>
    </div>

    <script>
        // 加载统一侧边栏
        document.addEventListener('DOMContentLoaded', function() {
            // 加载统一侧边栏
            fetch('/1.0/超级管理员/组件/_unified-sidebar.html')
                .then(response => response.text())
                .then(html => {
                    document.querySelector('#sidebar-container .sidebar-nav').innerHTML = html;
                    
                    // 初始化侧边栏
                    if (typeof initSidebar === 'function') {
                        initSidebar();
                    } else {
                        // 如果没有现成的initSidebar函数，使用简单的初始化
                        simpleInitSidebar();
                    }
                })
                .catch(error => {
                    console.error('加载统一侧边栏失败:', error);
                });

            // 从URL获取申诉ID
            const urlParams = new URLSearchParams(window.location.search);
            const appealId = urlParams.get('appealId');
            
            // 如果有申诉ID，可以根据申诉ID加载不同的数据
            if (appealId) {
                console.log('加载申诉ID:', appealId);
                // 在实际应用中，这里应该调用API获取申诉数据并填充页面
                // 这里为了演示，我们根据申诉ID切换不同的模拟数据
                loadAppealData(appealId);
            }
        });

        // 简单的侧边栏初始化函数
        function simpleInitSidebar() {
            // 菜单展开/收起功能
            document.querySelectorAll('.nav-expandable').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const parent = this.closest('.nav-group, .nav-subgroup');
                    const submenu = parent.querySelector('.nav-submenu');
                    
                    if (submenu) {
                        parent.classList.toggle('expanded');
                        submenu.style.display = parent.classList.contains('expanded') ? 'block' : 'none';
                    }
                });
            });
        }

        // 根据申诉ID加载数据（模拟函数）
        function loadAppealData(appealId) {
            // 这里是模拟数据加载，实际应用中应该从服务器获取
            console.log('加载申诉数据:', appealId);
            
            // 根据不同的申诉ID，我们可以切换不同的模拟数据
            if (appealId === 'A-002') {
                // 切换到A-002的数据（过度用药）
                document.querySelector('.case-info-item:nth-child(1) .case-info-value').textContent = 'A-002';
                document.querySelector('.case-info-item:nth-child(2) .case-info-value').textContent = '中日友好医院';
                document.querySelector('.case-info-item:nth-child(3) .case-info-value').textContent = '周*, 610...08D';
                document.querySelector('.case-info-item:nth-child(4) .case-info-value').textContent = '过度用药';
                document.querySelector('.case-info-item:nth-child(5) .case-info-value').textContent = '2024-10-12';
                
                document.querySelector('.case-info-item:nth-child(6) .case-info-value').textContent = '中日友好医院';
                document.querySelector('.case-info-item:nth-child(7) .case-info-value').textContent = '2024-10-18';
                document.querySelector('.case-info-item:nth-child(8) .case-info-value').textContent = '王医生（医保办）';
                document.querySelector('.case-info-item:nth-child(9) .case-info-value').textContent = '010-87654321';
                
                // 更新违规判定详情
                document.querySelector('.violation-type').textContent = '过度用药';
                document.querySelector('.violation-reason').textContent = '患者开具的某种高血压药物超出了医保规定的最大用量标准，单次处方量为3个月，而医保规定同类药物单次处方量不得超过1个月。';
                
                // 更新申诉理由
                document.querySelector('.appeal-reason').innerHTML = 
                    '<strong>医院申诉理由：</strong><br><br>' +
                    '患者周女士因高血压需要长期服药治疗，且患者居住在偏远地区，往返医院不便。根据患者的特殊情况和治疗需求，经医患沟通并签署知情同意书后，开具了3个月的处方用量。<br><br>' +
                    '我院认为，这是基于患者实际情况的合理用药，不属于过度用药违规。我们已提供患者的特殊情况说明、医患沟通记录以及患者签署的长期处方知情同意书。';
            }
        }

        // 文件预览功能
        function previewFile(fileName) {
            const modal = document.getElementById('filePreviewModal');
            const modalTitle = document.getElementById('modalFileName');
            const modalContent = document.getElementById('modalFileContent');
            
            modalTitle.textContent = `文件预览：${fileName}`;
            
            // 这里是模拟文件预览内容，实际应用中应该根据文件类型和路径加载真实内容
            let previewHtml = '';
            
            if (fileName.includes('出院')) {
                previewHtml = `
                    <div style="padding: 20px; background: #f8f9fa; border-radius: 4px;">
                        <h4 style="text-align: center; margin-bottom: 20px;">自动出院知情同意书</h4>
                        <p><strong>患者姓名：</strong>陈*</p>
                        <p><strong>住院号：</strong>20241005001</p>
                        <p><strong>住院日期：</strong>2024年10月5日 - 2024年10月8日</p>
                        <p><strong>诊断：</strong>肺炎</p>
                        <p><strong>出院原因：</strong>患者因个人原因要求出院</p>
                        <p><strong>医生告知：</strong>患者目前病情尚未完全稳定，提前出院可能导致病情反复或加重。</p>
                        <p><strong>患者声明：</strong>本人了解提前出院的风险，仍坚持要求出院，一切后果自负。</p>
                        <p style="margin-top: 30px;"><strong>患者签名：</strong>陈*</p>
                        <p><strong>日期：</strong>2024年10月8日</p>
                    </div>
                `;
            } else if (fileName.includes('病程')) {
                previewHtml = `
                    <div style="padding: 20px; background: #f8f9fa; border-radius: 4px;">
                        <h4 style="text-align: center; margin-bottom: 20px;">第二次住院病程记录</h4>
                        <p><strong>患者姓名：</strong>陈*</p>
                        <p><strong>住院号：</strong>20241011003</p>
                        <p><strong>住院日期：</strong>2024年10月11日</p>
                        <p><strong>主诉：</strong>咳嗽、发热3天</p>
                        <p><strong>现病史：</strong>患者3天前因肺炎出院，出院后未按医嘱继续服药，今日出现咳嗽加重、发热（T 38.5℃）等症状，遂来我院复诊。</p>
                        <p><strong>体格检查：</strong>双肺呼吸音粗，可闻及湿啰音。</p>
                        <p><strong>辅助检查：</strong>血常规示白细胞计数12.5×10^9/L，中性粒细胞百分比85%；胸部CT示双肺肺炎较前进展。</p>
                        <p><strong>诊断：</strong>肺炎（未愈，加重）</p>
                        <p><strong>治疗方案：</strong>继续抗感染治疗，调整抗生素种类，加强对症支持治疗。</p>
                        <p><strong>医师签名：</strong>张医生</p>
                        <p><strong>日期：</strong>2024年10月12日</p>
                    </div>
                `;
            } else if (fileName.includes('检查')) {
                previewHtml = `
                    <div style="padding: 20px; background: #f8f9fa; border-radius: 4px;">
                        <h4 style="text-align: center; margin-bottom: 20px;">第二次住院检查报告</h4>
                        <p><strong>患者姓名：</strong>陈*</p>
                        <p><strong>检查项目：</strong>胸部CT</p>
                        <p><strong>检查日期：</strong>2024年10月10日</p>
                        <p><strong>检查所见：</strong>双肺野可见斑片状高密度影，边界模糊，较前次（2024年10月5日）范围有所扩大，部分融合成大片状。双侧胸腔未见明显积液。</p>
                        <p><strong>印象：</strong>双肺肺炎较前进展，请结合临床。</p>
                        <p><strong>报告医师：</strong>李医生</p>
                        <p><strong>审核医师：</strong>王医生</p>
                        <p><strong>报告日期：</strong>2024年10月10日</p>
                    </div>
                `;
            } else if (fileName.includes('说明')) {
                previewHtml = `
                    <div style="padding: 20px; background: #f8f9fa; border-radius: 4px;">
                        <h4 style="text-align: center; margin-bottom: 20px;">主治医生情况说明</h4>
                        <p>关于患者陈*（住院号：20241005001、20241011003）两次住院的情况说明：</p>
                        <p>患者因肺炎于2024年10月5日首次入院，经治疗后症状有所缓解，但未完全康复。患者因家中有事，强烈要求出院，并于2024年10月8日签署自动出院知情同意书后出院。出院时，我已反复告知患者出院风险，并开具了出院带药，嘱咐其按时服药并定期复诊。</p>
                        <p>2024年10月11日，患者因症状加重再次入院，经检查确认为肺炎未愈并有所进展。此次住院与前次住院并非分解住院，而是患者未遵医嘱导致病情反复的结果。</p>
                        <p><strong>医师签名：</strong>张医生</p>
                        <p><strong>日期：</strong>2024年10月18日</p>
                    </div>
                `;
            }
            
            modalContent.innerHTML = previewHtml;
            modal.style.display = 'block';
        }

        // 关闭文件预览模态框
        function closeModal() {
            document.getElementById('filePreviewModal').style.display = 'none';
        }

        // 点击模态框外部关闭
        window.onclick = function(event) {
            const modal = document.getElementById('filePreviewModal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        }

        // 返回按钮功能
        function goBack() {
            // 返回上一页或审核结果管理页面
            window.location.href = '/1.0/超级管理员/事后审核管理/审核结果管理.html';
        }

        // 提交裁定结果功能
        function submitVerdict() {
            // 获取选中的裁定
            const selectedVerdict = document.querySelector('input[name="verdict"]:checked').value;
            const verdictOpinion = document.getElementById('verdictOpinion').value.trim();
            
            // 在实际应用中，这里应该调用API提交裁定
            console.log('提交裁定结果:', {
                verdict: selectedVerdict,
                opinion: verdictOpinion
            });
            
            // 显示成功提示
            let verdictText = selectedVerdict === 'upheld' ? '申诉成立，撤销原违规判定' : '申诉驳回，维持原判';
            
            alert(`裁定结果已提交：${verdictText}\n裁定理由：${verdictOpinion}`);
            
            // 返回审核结果管理页面
            goBack();
        }
    </script>
</body>
</html>