# 侧边栏路径修复指南

## 问题概述

当前系统在导航时出现大量 `404: 文件未找到` 错误，主要原因是各页面使用了不同的**相对路径**来引用侧边栏组件，导致导航路径累积错误。

服务器日志显示：
- 请求路径: `/1.0/组件/_unified-sidebar.html`（错误路径）
- 正确路径: `/1.0/超级管理员/组件/_unified-sidebar.html`

## 根本原因

系统中几乎所有页面都在使用不同的相对路径引用侧边栏组件，例如：
- `fetch('../组件/_unified-sidebar.html')`
- `fetch('../../组件/_unified-sidebar.html')` 
- `fetch('../../../组件/_unified-sidebar.html')`

当用户在系统中多次导航后，这些相对路径会导致请求的实际路径出错，从而产生404错误。

## 解决方案

**核心解决方案：** 将所有页面中引用侧边栏组件的**相对路径**统一改为**绝对路径**。

绝对路径格式：`/1.0/超级管理员/组件/_unified-sidebar.html`

## 手动修复步骤

由于自动脚本执行存在问题，建议采用以下手动修复方法：

### 1. 找到需要修复的文件

通过搜索工具或编辑器的全局搜索功能，查找所有包含侧边栏组件引用的HTML文件。

搜索关键词：`fetch('..*/组件/_unified-sidebar.html')`

### 2. 修改文件内容

打开找到的每个HTML文件，搜索并替换所有侧边栏组件引用：

**替换前**：
```javascript
fetch('../组件/_unified-sidebar.html')
// 或
fetch('../../组件/_unified-sidebar.html')
// 或
fetch('../../../组件/_unified-sidebar.html')
// 或其他类似的相对路径引用
```

**替换后**：
```javascript
fetch('/1.0/超级管理员/组件/_unified-sidebar.html')
```

### 3. 验证修复效果

修改完成后，访问系统并进行多次导航，检查是否还有404错误。

可以使用我们创建的测试页面进行验证：
[http://localhost:8000/1.0/超级管理员/测试修复.html](http://localhost:8000/1.0/超级管理员/测试修复.html)

## 批量修复建议

如果文件数量较多，可以使用以下方法进行批量修复：

### 使用VS Code批量替换

1. 打开VS Code，按 `Ctrl+Shift+F` 打开全局搜索
2. 在搜索框中输入：`fetch\(["']\.\.\/.*_unified-sidebar\.html["']\)`
3. 点击"替换"选项卡
4. 在替换框中输入：`fetch('/1.0/超级管理员/组件/_unified-sidebar.html')`
5. 点击"替换全部"按钮

### 使用Notepad++批量替换

1. 打开Notepad++，按 `Ctrl+F` 打开搜索对话框
2. 切换到"文件查找"选项卡
3. 在"查找内容"框中输入：`fetch\(["']\.\.\/.*_unified-sidebar\.html["']\)`
4. 在"替换为"框中输入：`fetch('/1.0/超级管理员/组件/_unified-sidebar.html')`
5. 设置"过滤器"为 `*.html`
6. 选择要搜索的目录
7. 勾选"正则表达式"选项
8. 点击"在文件中替换"按钮

## 验证方法

修复完成后，可以通过以下方式验证修复效果：

1. 访问测试页面 [http://localhost:8000/1.0/超级管理员/测试修复.html](http://localhost:8000/1.0/超级管理员/测试修复.html)
2. 点击页面上的测试链接
3. 打开浏览器开发者工具（按F12），切换到"网络"标签
4. 观察是否还有404错误
5. 也可以查看Node.js服务器的控制台输出，确认所有请求是否都被正确处理

## 总结

使用绝对路径替代相对路径是解决导航路径错误的根本方法。修复后，无论用户如何在系统中导航，侧边栏组件都能被正确加载，从而避免404错误。

---

**注意：** 修复完成后，请清除浏览器缓存并重启Node.js服务器，以确保所有更改生效。