<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ…¢ç—…èµ„æ ¼ç”³æŠ¥</title>
      <link rel="stylesheet" href="../../../æ ·å¼æ–‡ä»¶/é€šç”¨æ ·å¼.css">
    <link rel="stylesheet" href="../../../æ ·å¼æ–‡ä»¶/å®¡æ ¸è®°å½•æ ·å¼.css">
    <link rel="stylesheet" href="../../../æ ·å¼æ–‡ä»¶/unified-sidebar.css">
    <style>
        /* å…¨å±€æ ·å¼ - å·²ç§»é™¤æ‰€æœ‰divå…ƒç´ çš„è¾¹æ¡† */
        div {
            box-sizing: border-box;
        }
        
        /* æ…¢ç—…èµ„æ ¼ç”³æŠ¥é¡µé¢æ ·å¼ - ä¸»å®¹å™¨æ ·å¼ */
        /* ç¡®ä¿å®¹å™¨å æ»¡æ•´ä¸ªå¯ç”¨ç©ºé—´å¹¶å…è®¸æ»šåŠ¨ */
        .chronic-application-container {
            padding: 20px;
            width: calc(100% - 280px); /* ç¡®ä¿å®½åº¦ä¸ä¼šè¶…å‡ºçˆ¶å®¹å™¨ */
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden; /* ç¦æ­¢æ°´å¹³æ»šåŠ¨ */
            box-sizing: border-box;
            margin-left: 280px; /* ä¸ºå›ºå®šçš„ä¾§è¾¹æ ç•™å‡ºç©ºé—´ */
        }

        /* æ‰¹é‡ä¸Šä¼ åŒºåŸŸæ ·å¼ */
        .batch-upload-area {
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border: 2px dashed #d0d7de;
            border-radius: 8px;
            background-color: #f9f9f9;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 20px;
        }

        .batch-upload-area:hover {
            border-color: #4a90e2;
            background-color: #f0f7ff;
        }

        /* ä¸Šä¼ è¯´æ˜æ ·å¼ */
        .upload-instructions {
            background-color: #f0f7ff;
            border: 1px solid #d0d7de;
            border-radius: 6px;
            padding: 15px;
        }

        .upload-instructions p {
            margin: 5px 0;
            color: #555;
        }

        /* è¿›åº¦æ¡æ ·å¼ */
        .progress-bar {
            width: 100%;
            height: 20px;
            background-color: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background-color: #4a90e2;
            transition: width 0.3s ease;
        }

        .progress-text {
            text-align: center;
            color: #555;
            font-size: 14px;
        }

        /* è¡¨æ ¼åŒºåŸŸæ ·å¼ - ç¡®ä¿è¡¨æ ¼å®¹å™¨æ”¯æŒæ°´å¹³æ»šåŠ¨ */
        .table-section {
            background-color: var(--bg-primary); /* ä½¿ç”¨ä¸»é¢˜èƒŒæ™¯è‰² */
            border-radius: var(--radius-medium); /* ä½¿ç”¨ä¸»é¢˜ä¸­ç­‰åœ†è§’ */
            box-shadow: var(--shadow-light); /* ä½¿ç”¨ä¸»é¢˜è½»å¾®é˜´å½± */
            padding: 16px; /* å†…è¾¹è· */
            width: 100%; /* å®½åº¦100%ï¼Œå¡«æ»¡çˆ¶å®¹å™¨ */
            overflow-x: auto; /* å…è®¸æ°´å¹³æ»šåŠ¨ï¼Œè§£å†³è¡¨æ ¼è¿‡å®½é—®é¢˜ */
        }

        /* è¡¨æ ¼æ ·å¼ - ç¡®ä¿è¡¨æ ¼åœ¨å°å±å¹•ä¸‹ä¹Ÿèƒ½æ­£å¸¸æ˜¾ç¤º */
        .table {
            width: 100%; /* å®½åº¦100%ï¼Œå¡«æ»¡è¡¨æ ¼å®¹å™¨ */
            min-width: 800px; /* è®¾ç½®æœ€å°å®½åº¦ï¼Œç¡®ä¿è¡¨æ ¼å†…å®¹ä¸ä¼šè¿‡åº¦å‹ç¼© */
            table-layout: fixed; /* å›ºå®šè¡¨æ ¼å¸ƒå±€ï¼Œæé«˜æ¸²æŸ“æ€§èƒ½ */
        }
        
        /* é¡µé¢å¤´éƒ¨æ ·å¼ - æ ‡é¢˜åŒºåŸŸ */
        .page-header {
            display: flex; /* ä½¿ç”¨flexå¸ƒå±€ */
            justify-content: space-between; /* ä¸¤ç«¯å¯¹é½ */
            align-items: center; /* å‚ç›´å±…ä¸­ */
            margin-bottom: 20px; /* åº•éƒ¨è¾¹è·ï¼Œä¸ä¸‹æ–¹å†…å®¹åˆ†éš” */
        }
        
        .page-header h2 {
            margin: 0; /* é‡ç½®é»˜è®¤margin */
            color: var(--text-primary); /* ä½¿ç”¨ä¸»é¢˜ä¸»æ–‡æœ¬é¢œè‰² */
        }
        
        /* æœç´¢åŒºåŸŸæ ·å¼ - æœç´¢è¡¨å•å®¹å™¨ */
        .search-section {
            background-color: var(--bg-primary); /* ä½¿ç”¨ä¸»é¢˜èƒŒæ™¯è‰² */
            border-radius: var(--radius-medium); /* ä½¿ç”¨ä¸»é¢˜ä¸­ç­‰åœ†è§’ */
            box-shadow: var(--shadow-light); /* ä½¿ç”¨ä¸»é¢˜è½»å¾®é˜´å½± */
            padding: 16px; /* å†…è¾¹è· */
            margin-bottom: 20px; /* åº•éƒ¨è¾¹è·ï¼Œä¸ä¸‹æ–¹å†…å®¹åˆ†éš” */
        }
        
        /* è¡¨å•è¡Œæ ·å¼ - è¡¨å•å…ƒç´ çš„è¡Œå¸ƒå±€ */
        .form-row {
            display: flex; /* ä½¿ç”¨flexå¸ƒå±€ */
            gap: 16px; /* å…ƒç´ é—´è· */
            margin-bottom: 12px; /* åº•éƒ¨è¾¹è·ï¼Œä¸ä¸‹ä¸€è¡Œåˆ†éš” */
            flex-wrap: wrap; /* å…è®¸æ¢è¡Œï¼Œé€‚åº”å°å±å¹• */
        }
        
        /* è¡¨å•ç»„æ ·å¼ - å•ä¸ªè¡¨å•é¡¹å®¹å™¨ */
        .form-group {
            flex: 1; /* çµæ´»å æ®å‰©ä½™ç©ºé—´ */
            min-width: 150px; /* è®¾ç½®æœ€å°å®½åº¦ï¼Œç¡®ä¿åœ¨å°å±å¹•ä¸Šä¸ä¼šè¿‡åº¦å‹ç¼© */
        }
        
        /* æ—¥æœŸèŒƒå›´æ ·å¼ - æ—¥æœŸé€‰æ‹©å™¨å¸ƒå±€ */
        .date-range {
            display: flex; /* ä½¿ç”¨flexå¸ƒå±€ */
            align-items: center; /* å‚ç›´å±…ä¸­ */
            gap: 8px; /* å…ƒç´ é—´è· */
        }
        
        .date-separator {
            color: var(--text-tertiary); /* ä½¿ç”¨ä¸»é¢˜æ¬¡è¦æ–‡æœ¬é¢œè‰² */
        }
        
        /* æœç´¢æ“ä½œåŒºæ ·å¼ - æŒ‰é’®ç»„å¸ƒå±€ */
        .search-actions {
            display: flex; /* ä½¿ç”¨flexå¸ƒå±€ */
            gap: 8px; /* æŒ‰é’®é—´è· */
            align-items: flex-end; /* åº•éƒ¨å¯¹é½ï¼Œä¸è¡¨å•å…ƒç´ ä¿æŒä¸€è‡´ */
        }
        
        /* è¡¨æ ¼å¤´éƒ¨æ ·å¼ - è¡¨æ ¼æ ‡é¢˜å’Œæ“ä½œåŒº */
        .table-header {
            display: flex; /* ä½¿ç”¨flexå¸ƒå±€ */
            justify-content: space-between; /* ä¸¤ç«¯å¯¹é½ */
            align-items: center; /* å‚ç›´å±…ä¸­ */
            margin-bottom: 16px; /* åº•éƒ¨è¾¹è·ï¼Œä¸è¡¨æ ¼å†…å®¹åˆ†éš” */
        }
        
        .table-title {
            font-weight: var(--font-weight-semibold); /* ä½¿ç”¨ä¸»é¢˜åŠç²—ä½“å­—é‡ */
            color: var(--text-primary); /* ä½¿ç”¨ä¸»é¢˜ä¸»æ–‡æœ¬é¢œè‰² */
        }
        
        /* çŠ¶æ€æ ‡ç­¾æ ·å¼ - ç”³æŠ¥çŠ¶æ€æ ‡ç­¾ */
        .status-tag {
            padding: 2px 8px; /* å†…è¾¹è· */
            border-radius: 12px; /* åœ†è§’ï¼Œä½¿å…¶å‘ˆèƒ¶å›Šå½¢çŠ¶ */
            font-size: var(--font-size-xs); /* ä½¿ç”¨ä¸»é¢˜è¶…å°å­—ä½“ */
            font-weight: 500; /* ä¸­ç­‰å­—é‡ */
        }
        
        /* å¾…å¤„ç†çŠ¶æ€æ ‡ç­¾æ ·å¼ */
        .status-pending {
            background-color: var(--info-light); /* ä½¿ç”¨ä¸»é¢˜ä¿¡æ¯æµ…è‰²èƒŒæ™¯ */
            color: var(--info-color); /* ä½¿ç”¨ä¸»é¢˜ä¿¡æ¯é¢œè‰² */
            border: 1px solid var(--primary-light); /* ä½¿ç”¨ä¸»é¢˜ä¸»è¦æµ…è‰²è¾¹æ¡† */
        }
        
        /* è¯„å®¡ä¸­çŠ¶æ€æ ‡ç­¾æ ·å¼ */
        .status-reviewing {
            background-color: #f5f5f5; /* ä½¿ç”¨ç°è‰²èƒŒæ™¯ */
            color: #8c8c8c; /* ä½¿ç”¨ç°è‰²æ–‡å­— */
            border: 1px solid #d9d9d9; /* ä½¿ç”¨ç°è‰²è¾¹æ¡† */
        }
        
        /* å·²é€šè¿‡çŠ¶æ€æ ‡ç­¾æ ·å¼ */
        .status-approved {
            background-color: var(--success-light); /* ä½¿ç”¨ä¸»é¢˜æˆåŠŸæµ…è‰²èƒŒæ™¯ */
            color: var(--success-color); /* ä½¿ç”¨ä¸»é¢˜æˆåŠŸé¢œè‰² */
            border: 1px solid var(--success-light); /* ä½¿ç”¨ä¸»é¢˜æˆåŠŸæµ…è‰²è¾¹æ¡† */
        }
        
        /* å·²æ‹’ç»çŠ¶æ€æ ‡ç­¾æ ·å¼ */
        .status-rejected {
            background-color: var(--error-light); /* ä½¿ç”¨ä¸»é¢˜é”™è¯¯æµ…è‰²èƒŒæ™¯ */
            color: var(--error-color); /* ä½¿ç”¨ä¸»é¢˜é”™è¯¯é¢œè‰² */
            border: 1px solid var(--error-light); /* ä½¿ç”¨ä¸»é¢˜é”™è¯¯æµ…è‰²è¾¹æ¡† */
        }
        
        /* å¾…è¡¥å…¨çŠ¶æ€æ ‡ç­¾æ ·å¼ */
        .status-incomplete {
            background-color: var(--warning-light); /* ä½¿ç”¨ä¸»é¢˜è­¦å‘Šæµ…è‰²èƒŒæ™¯ */
            color: #faad14; /* æ·¡é»„è‰²æ–‡å­— */
            border: 1px solid var(--warning-light); /* ä½¿ç”¨ä¸»é¢˜è­¦å‘Šæµ…è‰²è¾¹æ¡† */
        }
        
        /* éœ€è¡¥å……ææ–™çŠ¶æ€æ ‡ç­¾æ ·å¼ */
        .status-supplement {
            background-color: #fff2f0; /* æ©˜çº¢è‰²èƒŒæ™¯ */
            color: #ff7a45; /* æ©˜çº¢è‰²æ–‡å­— */
            border: 1px solid #ffccc7; /* æ©˜çº¢è‰²è¾¹æ¡† */
        }
        
        /* æ“ä½œæŒ‰é’®ç»„æ ·å¼ */
        .action-buttons {
            display: flex; /* ä½¿ç”¨flexå¸ƒå±€ */
            gap: 8px; /* æŒ‰é’®é—´è· */
        }
        
        /* æŸ¥çœ‹å’Œå–æ¶ˆæŒ‰é’®åŸºç¡€æ ·å¼ */
        .btn-view, .btn-cancel {
            padding: 4px 12px; /* å†…è¾¹è· */
            border: none; /* æ— è¾¹æ¡† */
            border-radius: var(--radius-small); /* ä½¿ç”¨ä¸»é¢˜å°åœ†è§’ */
            cursor: pointer; /* é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºæŒ‡é’ˆ */
            font-size: var(--font-size-sm); /* ä½¿ç”¨ä¸»é¢˜å°å­—ä½“ */
            transition: all 0.2s; /* æ·»åŠ è¿‡æ¸¡æ•ˆæœ */
        }
        
        /* æŸ¥çœ‹æŒ‰é’®æ ·å¼ */
        .btn-view {
            background-color: var(--primary-light); /* ä½¿ç”¨ä¸»é¢˜ä¸»è¦æµ…è‰²èƒŒæ™¯ */
            color: var(--primary-color); /* ä½¿ç”¨ä¸»é¢˜ä¸»è¦é¢œè‰² */
        }
        
        .btn-view:hover {
            background-color: var(--primary-color); /* æ‚¬åœæ—¶ä½¿ç”¨ä¸»é¢˜ä¸»è¦é¢œè‰² */
            color: white; /* æ‚¬åœæ—¶æ–‡å­—ä¸ºç™½è‰² */
        }
        
        /* å–æ¶ˆæŒ‰é’®æ ·å¼ */
        .btn-cancel {
            background-color: var(--error-light); /* ä½¿ç”¨ä¸»é¢˜é”™è¯¯æµ…è‰²èƒŒæ™¯ */
            color: var(--error-color); /* ä½¿ç”¨ä¸»é¢˜é”™è¯¯é¢œè‰² */
        }
        
        .btn-cancel:hover {
            background-color: var(--error-color); /* æ‚¬åœæ—¶ä½¿ç”¨ä¸»é¢˜é”™è¯¯é¢œè‰² */
            color: white; /* æ‚¬åœæ—¶æ–‡å­—ä¸ºç™½è‰² */
        }
        
        /* æ¨¡æ€æ¡†æ ·å¼ - å¼¹å‡ºçª—å£åŸºç¡€æ ·å¼ */
        .modal {
            display: none; /* é»˜è®¤éšè— */
            position: fixed; /* å›ºå®šå®šä½ */
            top: 0; /* é¡¶éƒ¨å¯¹é½ */
            left: 0; /* å·¦ä¾§å¯¹é½ */
            width: 100%; /* å®½åº¦100% */
            height: 100%; /* é«˜åº¦100% */
            background-color: rgba(0, 0, 0, 0.5); /* åŠé€æ˜é»‘è‰²èƒŒæ™¯ */
            z-index: 1000; /* é«˜ä¼˜å…ˆçº§å±‚çº§ï¼Œç¡®ä¿åœ¨æœ€ä¸Šå±‚ */
            overflow-y: auto; /* å…è®¸å†…å®¹è¶…å‡ºæ—¶å‚ç›´æ»šåŠ¨ */
        }
        
        /* æ¨¡æ€æ¡†å†…å®¹æ ·å¼ */
        .modal-content {
            background-color: var(--bg-primary); /* ä½¿ç”¨ä¸»é¢˜èƒŒæ™¯è‰² */
            border-radius: var(--radius-medium); /* ä½¿ç”¨ä¸»é¢˜ä¸­ç­‰åœ†è§’ */
            margin: 20px auto; /* å±…ä¸­æ˜¾ç¤º */
            width: 90%; /* å®½åº¦90%ï¼Œé€‚åº”ä¸åŒå±å¹•å°ºå¯¸ */
            max-width: 800px; /* æœ€å¤§å®½åº¦ï¼Œé˜²æ­¢åœ¨å¤§å±å¹•ä¸Šè¿‡å®½ */
            max-height: 90vh; /* æœ€å¤§é«˜åº¦ï¼Œé˜²æ­¢å†…å®¹è¿‡å¤šæ—¶æº¢å‡º */
            display: flex; /* ä½¿ç”¨flexå¸ƒå±€ */
            flex-direction: column; /* å‚ç›´æ–¹å‘æ’åˆ— */
        }
        
        /* æ¨¡æ€æ¡†å¤´éƒ¨æ ·å¼ */
        .modal-header {
            padding: 16px 20px; /* å†…è¾¹è· */
            border-bottom: 1px solid var(--border-primary); /* åº•éƒ¨è¾¹æ¡†ï¼Œä¸å†…å®¹åŒºåˆ† */
            display: flex; /* ä½¿ç”¨flexå¸ƒå±€ */
            justify-content: space-between; /* ä¸¤ç«¯å¯¹é½ */
            align-items: center; /* å‚ç›´å±…ä¸­ */
        }
        
        .modal-title {
            margin: 0; /* é‡ç½®é»˜è®¤margin */
            font-size: var(--font-size-lg);
            color: var(--text-primary);
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: var(--text-tertiary);
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-small);
            transition: all 0.2s;
        }
        
        .modal-close:hover {
            background-color: var(--bg-hover);
            color: var(--text-primary);
        }
        
        .modal-body {
            padding: 20px;
            flex: 1;
            overflow-y: auto;
        }
        
        .modal-footer {
            padding: 16px 20px;
            border-top: 1px solid var(--border-primary);
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }
        
        /* æ–‡ä»¶ä¸Šä¼ æ ·å¼ */
        .upload-area {
            border: 2px dashed var(--border-primary);
            border-radius: var(--radius-medium);
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            background-color: var(--bg-secondary);
        }
        
        .upload-area:hover {
            border-color: var(--primary-color);
            background-color: var(--primary-light);
        }
        
        .upload-icon {
            font-size: 48px;
            color: var(--text-tertiary);
            margin-bottom: 8px;
        }
        
        .upload-text {
            color: var(--text-secondary);
        }
        
        .upload-hint {
            font-size: var(--font-size-xs);
            color: var(--text-tertiary);
            margin-top: 8px;
        }
        
        .file-list {
            margin-top: 16px;
        }
        
        .file-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-small);
            margin-bottom: 8px;
            background-color: var(--bg-secondary);
        }
        
        .file-info {
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
        }
        
        .file-name {
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .file-size {
            font-size: var(--font-size-xs);
            color: var(--text-tertiary);
        }
        
        .file-remove {
            background: none;
            border: none;
            color: var(--error-color);
            cursor: pointer;
            padding: 4px 8px;
            border-radius: var(--radius-small);
            transition: background-color 0.2s;
        }
        
        .file-remove:hover {
            background-color: var(--error-light);
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- ç»Ÿä¸€å·¦ä¾§èœå• -->
        <div id="sidebar-container"></div>
        
        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <div class="chronic-application-container">
                <!-- é¡µé¢å¤´éƒ¨ -->
                <div class="page-header">
                    <h2>æ…¢ç—…èµ„æ ¼ç”³æŠ¥</h2>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="openBatchApplicationModal()">+ æ‰¹é‡ç”³æŠ¥</button>
                    </div>
                </div>

                <!-- æœç´¢ç­›é€‰åŒºåŸŸ -->
                <div class="search-section">
                    <div class="search-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label>æ‚£è€…å§“å</label>
                                <input type="text" class="form-control" id="patientName" placeholder="è¯·è¾“å…¥æ‚£è€…å§“å">
                            </div>
                            <div class="form-group">
                                <label>ç”³è¯·ç—…ç§</label>
                                <select class="form-control" id="diseaseType">
                                    <option value="">å…¨éƒ¨ç—…ç§</option>
                                    <option value="hypertension">é«˜è¡€å‹å¹¶å‘ç—‡</option>
                                    <option value="diabetes">2å‹ç³–å°¿ç—…</option>
                                    <option value="heartDisease">å† å¿ƒç—…</option>
                                    <option value="stroke">è„‘å’ä¸­åé—ç—‡</option>
                                    <option value="kidneyDisease">æ…¢æ€§è‚¾è„ç—…</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>å®¡æ ¸çŠ¶æ€</label>
                                <select class="form-control" id="auditStatus">
                                    <option value="">å…¨éƒ¨çŠ¶æ€</option>
                                    <option value="pending">å¾…å®¡æ ¸</option>
                                    <option value="reviewing">è¯„å®¡ä¸­</option>
                                    <option value="approved">å·²é€šè¿‡</option>
                                    <option value="rejected">å·²é©³å›</option>
                                    <option value="incomplete">å¾…è¡¥å…¨</option>
                                    <option value="supplement">éœ€è¡¥å……ææ–™</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>æäº¤æ—¥æœŸ</label>
                                <div class="date-range">
                                    <input type="date" class="form-control" id="startDate">
                                    <span class="date-separator">è‡³</span>
                                    <input type="date" class="form-control" id="endDate">
                                </div>
                            </div>
                            <div class="form-group search-actions">
                                <button class="btn btn-primary" onclick="searchApplications()">æœç´¢</button>
                                <button class="btn btn-secondary" onclick="resetSearch()">é‡ç½®</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ç”³æŠ¥è®°å½•è¡¨æ ¼ -->
                <div class="table-section">
                    <div class="table-header">
                        <div class="table-title">ç”³æŠ¥è®°å½•åˆ—è¡¨</div>
                        <div class="table-actions">
                            <select class="form-control" id="pageSize" onchange="changePageSize()" style="width: auto;">
                                <option value="10">10æ¡/é¡µ</option>
                                <option value="20" selected>20æ¡/é¡µ</option>
                                <option value="50">50æ¡/é¡µ</option>
                            </select>
                        </div>
                    </div>
                    
                    <table class="table">
                        <thead>
                            <tr>
                                <th>ç”³æŠ¥ID</th>
                                <th>æ‚£è€…å§“å</th>
                                <th>èº«ä»½è¯å·</th>
                                <th>ç”³è¯·ç—…ç§</th>
                                <th>ç”³æŠ¥åŒ»é™¢</th>
                                <th>æäº¤æ—¶é—´</th>
                                <th>å®¡æ ¸çŠ¶æ€</th>
                                <th>æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody id="applicationTableBody">
                            <!-- æ¨¡æ‹Ÿæ•°æ®å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </tbody>
                    </table>
                    
                    <!-- åˆ†é¡µ -->
                    <div class="pagination" id="pagination">
                        <!-- åˆ†é¡µæ§ä»¶å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- æ–°å»ºç”³æŠ¥æ¨¡æ€æ¡† -->
    <div class="modal" id="newApplicationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">æ–°å»ºæ…¢ç—…èµ„æ ¼ç”³æŠ¥</h3>
                <button class="modal-close" onclick="closeNewApplicationModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="newApplicationForm">
                    <div class="form-group">
                        <label class="required">æ‚£è€…å§“å</label>
                        <input type="text" class="form-control" id="newPatientName" required placeholder="è¯·è¾“å…¥æ‚£è€…å§“å">
                    </div>
                    <div class="form-group">
                        <label class="required">èº«ä»½è¯å·</label>
                        <input type="text" class="form-control" id="newPatientId" required placeholder="è¯·è¾“å…¥18ä½èº«ä»½è¯å·">
                    </div>
                    <div class="form-group">
                        <label class="required">ç”³è¯·ç—…ç§</label>
                        <select class="form-control" id="newDiseaseType" required>
                            <option value="">è¯·é€‰æ‹©ç—…ç§</option>
                            <option value="hypertension">é«˜è¡€å‹å¹¶å‘ç—‡</option>
                            <option value="diabetes">2å‹ç³–å°¿ç—…</option>
                            <option value="heartDisease">å† å¿ƒç—…</option>
                            <option value="stroke">è„‘å’ä¸­åé—ç—‡</option>
                            <option value="kidneyDisease">æ…¢æ€§è‚¾è„ç—…</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>ç”³æŠ¥åŒ»é™¢</label>
                        <input type="text" class="form-control" id="newHospital" placeholder="è¯·è¾“å…¥ç”³æŠ¥åŒ»é™¢åç§°" value="åŒ—äº¬åå’ŒåŒ»é™¢">
                    </div>
                    <div class="form-group">
                        <label class="required">ææ–™ä¸Šä¼ </label>
                        <div class="upload-area" onclick="document.getElementById('fileUpload').click()">
                            <input type="file" id="fileUpload" multiple accept=".pdf,.jpg,.jpeg,.png" style="display: none;">
                            <div class="upload-icon">ğŸ“</div>
                            <div class="upload-text">ç‚¹å‡»æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„ä¸Šä¼ </div>
                            <div class="upload-hint">æ”¯æŒPDFã€JPGã€PNGæ ¼å¼ï¼Œæœ€å¤šä¸Šä¼ 5ä¸ªæ–‡ä»¶</div>
                        </div>
                        <div class="file-list" id="fileList"></div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeNewApplicationModal()">å–æ¶ˆ</button>
                <button class="btn btn-primary" onclick="submitNewApplication()">æäº¤</button>
            </div>
        </div>
    </div>

    <!-- æ‰¹é‡ç”³æŠ¥æ¨¡æ€æ¡† -->
    <div class="modal" id="batchApplicationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">æ‰¹é‡æ…¢ç—…èµ„æ ¼ç”³æŠ¥</h3>
                <button class="modal-close" onclick="closeBatchApplicationModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="upload-instructions">
                    <h4>æ‰¹é‡ç”³æŠ¥è¯´æ˜ï¼š</h4>
                    <ul>
                        <li>æ”¯æŒæ‹–æ‹½æˆ–é€‰æ‹©å¤šä¸ªæ–‡ä»¶å¤¹/æ–‡ä»¶è¿›è¡Œæ‰¹é‡ä¸Šä¼ </li>
                        <li>ç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«æ–‡ä»¶å†…å®¹å¹¶æ ¹æ®èº«ä»½è¯å·åˆ†ç»„</li>
                        <li>æ”¯æŒçš„æ–‡ä»¶æ ¼å¼ï¼šPDFã€JPGã€PNGã€DOCã€DOCX</li>
                        <li>å•æ–‡ä»¶å¤§å°ä¸è¶…è¿‡10MBï¼Œå•æ¬¡ä¸Šä¼ æ€»æ•°ä¸è¶…è¿‡100ä¸ªæ–‡ä»¶</li>
                    </ul>
                </div>
                <div class="upload-area" id="batchUploadArea" onclick="document.getElementById('batchFileUpload').click()">
                    <input type="file" id="batchFileUpload" multiple style="display: none;">
                    <div class="upload-icon">ğŸ“</div>
                    <div class="upload-text">ç‚¹å‡»æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„ä¸Šä¼ </div>
                    <div class="upload-hint">æ”¯æŒPDFã€JPGã€PNGã€DOCã€DOCXæ ¼å¼</div>
                </div>
                <div id="uploadProgress" style="display: none; margin-top: 20px;">
                    <div class="progress-label">æ–‡ä»¶å¤„ç†ä¸­...</div>
                    <div class="progress-bar">
                        <div class="progress-bar-fill" id="progressBarFill"></div>
                    </div>
                    <div class="progress-text" id="progressText">0%</div>
                </div>
                <div class="file-list" id="batchFileList" style="max-height: 300px; overflow-y: auto; margin-top: 20px;"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeBatchApplicationModal()">å–æ¶ˆ</button>
                <button class="btn btn-primary" id="btnSubmitBatch" onclick="submitBatchApplication()">å¼€å§‹å¤„ç†</button>
                <button class="btn btn-secondary" onclick="openSimulatedReport()">æ¨¡æ‹Ÿç”³æŠ¥å¤„ç†æŠ¥å‘Š</button>
            </div>
        </div>
    </div>

    <!-- åŠ è½½ç»Ÿä¸€èœå•ç»„ä»¶è„šæœ¬ -->
    <script>
    // åŠ è½½ç»Ÿä¸€èœå•ç»„ä»¶
    fetch('../../ç»„ä»¶/_unified-sidebar.html')
        .then(response => response.text())
        .then(html => {
            const sidebarContainer = document.getElementById('sidebar-container');
            sidebarContainer.innerHTML = html;
            // æ‰‹åŠ¨æ‰§è¡Œæ’å…¥çš„è„šæœ¬
            const scripts = sidebarContainer.querySelectorAll('script');
            scripts.forEach(script => {
                const newScript = document.createElement('script');
                if (script.src) {
                    newScript.src = script.src;
                } else {
                    newScript.textContent = script.textContent;
                }
                document.head.appendChild(newScript);
                script.remove();
            });
            // ç­‰å¾…è„šæœ¬æ‰§è¡Œåå†åˆå§‹åŒ–èœå•
            setTimeout(() => {
                if (typeof initSidebar === 'function') {
                    initSidebar();
                }
            }, 100);
        })
        .catch(error => console.error('Error loading sidebar:', error));
    </script>

    <script>
        // æ¨¡æ‹Ÿæ•°æ®
        const mockApplications = [
            { id: 'CM-202408001', name: 'å¼ ä¸‰', idCard: '110101199001011234', disease: 'é«˜è¡€å‹å¹¶å‘ç—‡', hospital: 'åŒ—äº¬åå’ŒåŒ»é™¢', submitTime: '2024-08-18 09:30', status: 'pending' },
            { id: 'CM-202408002', name: 'æå››', idCard: '110101199202022345', disease: '2å‹ç³–å°¿ç—…', hospital: 'åŒ—äº¬åå’ŒåŒ»é™¢', submitTime: '2024-08-17 14:45', status: 'reviewing' },
            { id: 'CM-202408003', name: 'ç‹äº”', idCard: '110101199503033456', disease: 'å† å¿ƒç—…', hospital: 'åŒ—äº¬åå’ŒåŒ»é™¢', submitTime: '2024-08-16 10:20', status: 'approved' },
            { id: 'CM-202408004', name: 'èµµå…­', idCard: '110101199804044567', disease: 'è„‘å’ä¸­åé—ç—‡', hospital: 'åŒ—äº¬åå’ŒåŒ»é™¢', submitTime: '2024-08-15 16:10', status: 'rejected' },
            { id: 'CM-202408005', name: 'é’±ä¸ƒ', idCard: '110101199105055678', disease: 'æ…¢æ€§è‚¾è„ç—…', hospital: 'åŒ—äº¬åå’ŒåŒ»é™¢', submitTime: '2024-08-14 08:50', status: 'pending' },
            { id: 'CM-202408006', name: 'å­™å…«', idCard: '110101199306066789', disease: 'é«˜è¡€å‹å¹¶å‘ç—‡', hospital: 'åŒ—äº¬åå’ŒåŒ»é™¢', submitTime: '2024-08-13 13:30', status: 'reviewing' },
            { id: 'CM-202408007', name: 'å‘¨ä¹', idCard: '110101199607077890', disease: '2å‹ç³–å°¿ç—…', hospital: 'åŒ—äº¬åå’ŒåŒ»é™¢', submitTime: '2024-08-12 11:40', status: 'approved' },
            { id: 'CM-202408008', name: 'å´å', idCard: '110101199908088901', disease: 'å† å¿ƒç—…', hospital: 'åŒ—äº¬åå’ŒåŒ»é™¢', submitTime: '2024-08-11 15:20', status: 'rejected' },
            { id: 'CM-202408009', name: 'éƒ‘ä¸€', idCard: '110101199209099012', disease: 'è„‘å’ä¸­åé—ç—‡', hospital: 'åŒ—äº¬åå’ŒåŒ»é™¢', submitTime: '2024-08-10 09:10', status: 'pending' },
            { id: 'CM-202408010', name: 'ç‹äºŒ', idCard: '110101199410100123', disease: 'æ…¢æ€§è‚¾è„ç—…', hospital: 'åŒ—äº¬åå’ŒåŒ»é™¢', submitTime: '2024-08-09 14:50', status: 'reviewing' },
            { id: 'CM-202408011', name: 'é™ˆä¸‰', idCard: '110101198901012345', disease: 'é«˜è¡€å‹å¹¶å‘ç—‡', hospital: 'åŒ—äº¬åå’ŒåŒ»é™¢', submitTime: '2024-08-19 10:20', status: 'incomplete' },
            { id: 'CM-202408012', name: 'æå', idCard: '110101198703034567', disease: '2å‹ç³–å°¿ç—…', hospital: 'åŒ—äº¬åå’ŒåŒ»é™¢', submitTime: '2024-08-18 16:30', status: 'supplement' }
        ];

        // å½“å‰é¡µç å’Œæ¯é¡µæ˜¾ç¤ºæ•°é‡
        let currentPage = 1;
        let pageSize = 10;
        let filteredApplications = [...mockApplications];

        // æ¸²æŸ“è¡¨æ ¼æ•°æ®
        function renderTableData() {
            const tableBody = document.getElementById('applicationTableBody');
            tableBody.innerHTML = '';

            const startIndex = (currentPage - 1) * pageSize;
            const endIndex = startIndex + pageSize;
            const paginatedData = filteredApplications.slice(startIndex, endIndex);

            if (paginatedData.length === 0) {
                const emptyRow = document.createElement('tr');
                emptyRow.innerHTML = `<td colspan="8" class="text-center">æš‚æ— æ•°æ®</td>`;
                tableBody.appendChild(emptyRow);
                return;
            }

            paginatedData.forEach(application => {
                const row = document.createElement('tr');
                
                // çŠ¶æ€æ ‡ç­¾æ ·å¼
                let statusClass = '';
                let statusText = '';
                switch (application.status) {
                    case 'pending':
                        statusClass = 'status-pending';
                        statusText = 'å¾…å®¡æ ¸';
                        break;
                    case 'reviewing':
                        statusClass = 'status-reviewing';
                        statusText = 'è¯„å®¡ä¸­';
                        break;
                    case 'approved':
                        statusClass = 'status-approved';
                        statusText = 'å·²é€šè¿‡';
                        break;
                    case 'rejected':
                        statusClass = 'status-rejected';
                        statusText = 'å·²é©³å›';
                        break;
                    case 'incomplete':
                        statusClass = 'status-incomplete';
                        statusText = 'å¾…è¡¥å…¨';
                        break;
                    case 'supplement':
                        statusClass = 'status-supplement';
                        statusText = 'éœ€è¡¥å……ææ–™';
                        break;
                }

                row.innerHTML = `
                    <td>${application.id}</td>
                    <td>${application.name}</td>
                    <td>${formatIdCard(application.idCard)}</td>
                    <td>${application.disease}</td>
                    <td>${application.hospital}</td>
                    <td>${application.submitTime}</td>
                    <td><span class="status-tag ${statusClass}">${statusText}</span></td>
                    <td class="action-buttons">
                            <button class="btn-view" onclick="viewApplication('${application.id}')">æŸ¥çœ‹è¯¦æƒ…</button>
                            ${application.status === 'incomplete' ? `
                            <button class="btn-complete" onclick="completeApplication('${application.id}')">è¡¥å…¨ææ–™</button>
                            ` : ''}
                            ${application.status === 'supplement' ? `
                            <button class="btn-supplement" onclick="supplementApplication('${application.id}')">è¡¥å……ææ–™å¹¶é‡æ</button>
                            ` : ''}
                            ${['pending', 'reviewing'].includes(application.status) ? `
                            <button class="btn-cancel" onclick="cancelApplication('${application.id}')">æ’¤é”€</button>
                            ` : ''}
                        </td>
                `;
                tableBody.appendChild(row);
            });

            // æ¸²æŸ“åˆ†é¡µ
            renderPagination();
        }

        // æ ¼å¼åŒ–èº«ä»½è¯å·ï¼ˆä¸­é—´éƒ¨åˆ†ç”¨*ä»£æ›¿ï¼‰
        function formatIdCard(idCard) {
            if (!idCard || idCard.length !== 18) return idCard;
            return idCard.substring(0, 6) + '********' + idCard.substring(14);
        }

        // æ¸²æŸ“åˆ†é¡µæ§ä»¶
        function renderPagination() {
            const pagination = document.getElementById('pagination');
            pagination.innerHTML = '';

            const totalPages = Math.ceil(filteredApplications.length / pageSize);
            const maxVisiblePages = 5;
            
            let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
            let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);
            
            if (endPage - startPage + 1 < maxVisiblePages) {
                startPage = Math.max(1, endPage - maxVisiblePages + 1);
            }

            // ä¸Šä¸€é¡µ
            const prevButton = document.createElement('button');
            prevButton.textContent = 'ä¸Šä¸€é¡µ';
            prevButton.disabled = currentPage === 1;
            prevButton.onclick = () => {
                if (currentPage > 1) {
                    currentPage--;
                    renderTableData();
                }
            };
            prevButton.className = 'btn btn-secondary';
            pagination.appendChild(prevButton);
            
            // é¡µç 
            for (let i = startPage; i <= endPage; i++) {
                const pageButton = document.createElement('button');
                pageButton.textContent = i;
                pageButton.disabled = i === currentPage;
                pageButton.onclick = () => {
                    currentPage = i;
                    renderTableData();
                };
                pageButton.className = i === currentPage ? 'btn btn-primary' : 'btn btn-secondary';
                pagination.appendChild(pageButton);
            }
            
            // ä¸‹ä¸€é¡µ
            const nextButton = document.createElement('button');
            nextButton.textContent = 'ä¸‹ä¸€é¡µ';
            nextButton.disabled = currentPage === totalPages;
            nextButton.onclick = () => {
                if (currentPage < totalPages) {
                    currentPage++;
                    renderTableData();
                }
            };
            nextButton.className = 'btn btn-secondary';
            pagination.appendChild(nextButton);
            
            // é¡µç ä¿¡æ¯
            const pageInfo = document.createElement('span');
            pageInfo.textContent = `ç¬¬ ${currentPage} é¡µï¼Œå…± ${totalPages} é¡µï¼Œå…± ${filteredApplications.length} æ¡è®°å½•`;
            pageInfo.style.marginLeft = '20px';
            pageInfo.style.color = 'var(--text-secondary)';
            pagination.appendChild(pageInfo);
        }

        // æœç´¢ç”³æŠ¥è®°å½•
        function searchApplications() {
            const patientName = document.getElementById('patientName').value.toLowerCase();
            const diseaseType = document.getElementById('diseaseType').value;
            const auditStatus = document.getElementById('auditStatus').value;
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;

            filteredApplications = mockApplications.filter(app => {
                let match = true;
                
                if (patientName && !app.name.toLowerCase().includes(patientName)) {
                    match = false;
                }
                if (diseaseType && app.disease !== getDiseaseText(diseaseType)) {
                    match = false;
                }
                if (auditStatus && app.status !== auditStatus) {
                    match = false;
                }
                if (startDate && new Date(app.submitTime.split(' ')[0]) < new Date(startDate)) {
                    match = false;
                }
                if (endDate && new Date(app.submitTime.split(' ')[0]) > new Date(endDate)) {
                    match = false;
                }
                
                return match;
            });

            currentPage = 1; // é‡ç½®ä¸ºç¬¬ä¸€é¡µ
            renderTableData();
        }

        // æ ¹æ®ç—…ç§ä»£ç è·å–ç—…ç§æ–‡æœ¬
        function getDiseaseText(code) {
            const diseaseMap = {
                'hypertension': 'é«˜è¡€å‹å¹¶å‘ç—‡',
                'diabetes': '2å‹ç³–å°¿ç—…',
                'heartDisease': 'å† å¿ƒç—…',
                'stroke': 'è„‘å’ä¸­åé—ç—‡',
                'kidneyDisease': 'æ…¢æ€§è‚¾è„ç—…'
            };
            return diseaseMap[code] || '';
        }

        // é‡ç½®æœç´¢æ¡ä»¶
        function resetSearch() {
            document.getElementById('patientName').value = '';
            document.getElementById('diseaseType').value = '';
            document.getElementById('auditStatus').value = '';
            document.getElementById('startDate').value = '';
            document.getElementById('endDate').value = '';
            
            filteredApplications = [...mockApplications];
            currentPage = 1;
            renderTableData();
        }

        // æ›´æ”¹æ¯é¡µæ˜¾ç¤ºæ•°é‡
        function changePageSize() {
            pageSize = parseInt(document.getElementById('pageSize').value);
            currentPage = 1;
            renderTableData();
        }

        // æŸ¥çœ‹ç”³æŠ¥è¯¦æƒ…
        function viewApplication(id) {
            // æ ¹æ®ç”³æŠ¥IDæŸ¥æ‰¾å¯¹åº”çš„åº”ç”¨
            const application = mockApplications.find(app => app.id === id);
            if (application) {
                // æ ¹æ®çŠ¶æ€è·³è½¬åˆ°å¯¹åº”çš„è¯¦æƒ…é¡µé¢
                let detailPage = 'material-detail.html';
                switch (application.status) {
                    case 'reviewing':
                        detailPage = 'material-detail-reviewing.html';
                        break;
                    case 'approved':
                        detailPage = 'material-detail-approved.html';
                        break;
                    case 'rejected':
                        detailPage = 'material-detail-rejected.html';
                        break;
                    case 'supplement':
                        detailPage = 'material-detail-supplement.html';
                        break;
                    // å¾…å®¡æ ¸(pending)å’Œå¾…è¡¥å…¨(incomplete)ä½¿ç”¨é»˜è®¤é¡µé¢
                    default:
                        detailPage = 'material-detail.html';
                }
                window.location.href = `${detailPage}?id=${id}&action=view`;
            }
        }
        
        // è¡¥å…¨ææ–™
        function completeApplication(id) {
            window.location.href = `material-detail.html?id=${id}&action=complete`;
        }
        
        // è¡¥å……ææ–™å¹¶é‡æ
        function supplementApplication(id) {
            window.location.href = `material-detail.html?id=${id}&action=supplement`;
        }

        // æ’¤é”€ç”³æŠ¥
        function cancelApplication(id) {
            if (confirm(`ç¡®å®šè¦æ’¤é”€ç”³æŠ¥IDï¼š${id} å—ï¼Ÿ`)) {
                // å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šè°ƒç”¨APIæ’¤é”€ç”³æŠ¥
                alert(`ç”³æŠ¥IDï¼š${id} å·²æ’¤é”€`);
                // é‡æ–°åŠ è½½æ•°æ®
                resetSearch();
            }
        }

        // æ‰“å¼€æ–°å»ºç”³æŠ¥æ¨¡æ€æ¡†
        function openNewApplicationModal() {
            document.getElementById('newApplicationModal').style.display = 'flex';
        }

        // å…³é—­æ–°å»ºç”³æŠ¥æ¨¡æ€æ¡†
        function closeNewApplicationModal() {
            document.getElementById('newApplicationModal').style.display = 'none';
            document.getElementById('newApplicationForm').reset();
            document.getElementById('fileList').innerHTML = '';
        }

        // æ–‡ä»¶ä¸Šä¼ å¤„ç†
        let uploadedFiles = [];
        document.getElementById('fileUpload').addEventListener('change', function(e) {
            const files = Array.from(e.target.files);
            
            // æ£€æŸ¥æ–‡ä»¶æ•°é‡é™åˆ¶
            if (uploadedFiles.length + files.length > 5) {
                alert('æœ€å¤šåªèƒ½ä¸Šä¼ 5ä¸ªæ–‡ä»¶');
                return;
            }
            
            // æ£€æŸ¥æ–‡ä»¶ç±»å‹
            const validFiles = files.filter(file => {
                const extension = file.name.split('.').pop().toLowerCase();
                return ['pdf', 'jpg', 'jpeg', 'png'].includes(extension);
            });
            
            if (validFiles.length < files.length) {
                alert('åªæ”¯æŒPDFã€JPGã€PNGæ ¼å¼çš„æ–‡ä»¶');
            }
            
            // æ·»åŠ æœ‰æ•ˆæ–‡ä»¶
            validFiles.forEach(file => {
                uploadedFiles.push(file);
            });
            
            // æ¸²æŸ“æ–‡ä»¶åˆ—è¡¨
            renderFileList();
            
            // æ¸…ç©ºinputï¼Œå…è®¸é‡å¤é€‰æ‹©åŒä¸€æ–‡ä»¶
            this.value = '';
        });

        // æ¸²æŸ“æ–‡ä»¶åˆ—è¡¨
        function renderFileList() {
            const fileList = document.getElementById('fileList');
            fileList.innerHTML = '';
            
            uploadedFiles.forEach((file, index) => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                
                // æ–‡ä»¶å¤§å°æ ¼å¼åŒ–
                let fileSize = (file.size / 1024).toFixed(2);
                let sizeUnit = 'KB';
                if (fileSize > 1024) {
                    fileSize = (fileSize / 1024).toFixed(2);
                    sizeUnit = 'MB';
                }
                
                fileItem.innerHTML = `
                    <div class="file-info">
                        <div class="file-icon">
                            ${getFileIcon(file.name)}
                        </div>
                        <div class="file-name">${file.name}</div>
                        <div class="file-size">${fileSize} ${sizeUnit}</div>
                    </div>
                    <button class="file-remove" onclick="removeFile(${index})">Ã—</button>
                `;
                
                fileList.appendChild(fileItem);
            });
        }

        // è·å–æ–‡ä»¶å›¾æ ‡
        function getFileIcon(fileName) {
            const extension = fileName.split('.').pop().toLowerCase();
            if (extension === 'pdf') return 'ğŸ“„';
            if (['jpg', 'jpeg', 'png'].includes(extension)) return 'ğŸ–¼ï¸';
            return 'ğŸ“';
        }

        // ç§»é™¤æ–‡ä»¶
        function removeFile(index) {
            uploadedFiles.splice(index, 1);
            renderFileList();
        }

        // æäº¤æ–°å»ºç”³æŠ¥
        function submitNewApplication() {
            const patientName = document.getElementById('newPatientName').value;
            const patientId = document.getElementById('newPatientId').value;
            const diseaseType = document.getElementById('newDiseaseType').value;
            const hospital = document.getElementById('newHospital').value;
            
            // è¡¨å•éªŒè¯
            if (!patientName || !patientId || !diseaseType) {
                alert('è¯·å¡«å†™å¿…å¡«é¡¹');
                return;
            }
            
            // èº«ä»½è¯å·éªŒè¯ï¼ˆç®€å•éªŒè¯ï¼‰
            if (!/^\d{18}$/.test(patientId)) {
                alert('è¯·è¾“å…¥æ­£ç¡®çš„18ä½èº«ä»½è¯å·');
                return;
            }
            
            // æ£€æŸ¥æ˜¯å¦ä¸Šä¼ äº†æ–‡ä»¶
            if (uploadedFiles.length === 0) {
                alert('è¯·è‡³å°‘ä¸Šä¼ ä¸€ä¸ªè¯æ˜ææ–™');
                return;
            }
            
            // æ¨¡æ‹Ÿæäº¤æˆåŠŸ
            alert('ç”³æŠ¥æäº¤æˆåŠŸï¼');
            
            // å…³é—­æ¨¡æ€æ¡†
            closeNewApplicationModal();
            
            // æ¨¡æ‹Ÿæ·»åŠ æ–°æ•°æ®
            const newApplication = {
                id: 'CM-' + new Date().getTime(),
                name: patientName,
                idCard: patientId,
                disease: getDiseaseText(diseaseType),
                hospital: hospital,
                submitTime: new Date().toLocaleString('zh-CN'),
                status: 'pending'
            };
            
            // å°†æ–°æ•°æ®æ·»åŠ åˆ°åˆ—è¡¨å¼€å¤´
            mockApplications.unshift(newApplication);
            
            // é‡æ–°åŠ è½½æ•°æ®
            resetSearch();
        }

        // æ‰“å¼€æ‰¹é‡ç”³æŠ¥æ¨¡æ€æ¡†
        function openBatchApplicationModal() {
            document.getElementById('batchApplicationModal').style.display = 'flex';
            // é‡ç½®ä¸Šä¼ åŒºåŸŸ
            document.getElementById('batchFileList').innerHTML = '';
            document.getElementById('uploadProgress').style.display = 'none';
            document.getElementById('btnSubmitBatch').disabled = false;
            batchUploadedFiles = [];
        }

        // å…³é—­æ‰¹é‡ç”³æŠ¥æ¨¡æ€æ¡†
        function closeBatchApplicationModal() {
            document.getElementById('batchApplicationModal').style.display = 'none';
        }

        // æ‰¹é‡ä¸Šä¼ æ–‡ä»¶å¤„ç†
        let batchUploadedFiles = [];
        document.getElementById('batchFileUpload').addEventListener('change', function(e) {
            const files = Array.from(e.target.files);
            handleBatchFileSelection(files);
        });

        // å¤„ç†æ‰¹é‡æ–‡ä»¶é€‰æ‹©
        function handleBatchFileSelection(files) {
            // æ£€æŸ¥æ–‡ä»¶æ•°é‡é™åˆ¶
            if (batchUploadedFiles.length + files.length > 100) {
                alert('æœ€å¤šåªèƒ½ä¸Šä¼ 100ä¸ªæ–‡ä»¶');
                return;
            }
            
            // æ£€æŸ¥æ–‡ä»¶ç±»å‹å’Œå¤§å°
            const validFiles = files.filter(file => {
                const extension = file.name.split('.').pop().toLowerCase();
                const validExtension = ['pdf', 'jpg', 'jpeg', 'png', 'doc', 'docx'].includes(extension);
                const validSize = file.size <= 10 * 1024 * 1024; // 10MB
                return validExtension && validSize;
            });
            
            if (validFiles.length < files.length) {
                alert('åªæ”¯æŒPDFã€JPGã€PNGã€DOCã€DOCXæ ¼å¼ï¼Œä¸”æ–‡ä»¶å¤§å°ä¸è¶…è¿‡10MB');
            }
            
            // æ·»åŠ æœ‰æ•ˆæ–‡ä»¶
            validFiles.forEach(file => {
                batchUploadedFiles.push(file);
            });
            
            // æ¸²æŸ“æ–‡ä»¶åˆ—è¡¨
            renderBatchFileList();
            
            // æ¸…ç©ºinputï¼Œå…è®¸é‡å¤é€‰æ‹©åŒä¸€æ–‡ä»¶
            document.getElementById('batchFileUpload').value = '';
        }

        // æ¸²æŸ“æ‰¹é‡æ–‡ä»¶åˆ—è¡¨
        function renderBatchFileList() {
            const fileList = document.getElementById('batchFileList');
            fileList.innerHTML = '';
            
            if (batchUploadedFiles.length === 0) {
                fileList.innerHTML = '<div class="no-files">æš‚æ— ä¸Šä¼ æ–‡ä»¶</div>';
                return;
            }
            
            fileList.innerHTML = `<div class="file-count">å…±ä¸Šä¼  ${batchUploadedFiles.length} ä¸ªæ–‡ä»¶</div>`;
            
            batchUploadedFiles.forEach((file, index) => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                
                // æ–‡ä»¶å¤§å°æ ¼å¼åŒ–
                let fileSize = (file.size / 1024).toFixed(2);
                let sizeUnit = 'KB';
                if (fileSize > 1024) {
                    fileSize = (fileSize / 1024).toFixed(2);
                    sizeUnit = 'MB';
                }
                
                fileItem.innerHTML = `
                    <div class="file-info">
                        <div class="file-icon">
                            ${getFileIcon(file.name)}
                        </div>
                        <div class="file-name">${file.name}</div>
                        <div class="file-size">${fileSize} ${sizeUnit}</div>
                    </div>
                    <button class="file-remove" onclick="removeBatchFile(${index})">Ã—</button>
                `;
                
                fileList.appendChild(fileItem);
            });
        }

        // ç§»é™¤æ‰¹é‡ä¸Šä¼ æ–‡ä»¶
        function removeBatchFile(index) {
            batchUploadedFiles.splice(index, 1);
            renderBatchFileList();
        }

        // æäº¤æ‰¹é‡ç”³æŠ¥
        function submitBatchApplication() {
            if (batchUploadedFiles.length === 0) {
                alert('è¯·è‡³å°‘ä¸Šä¼ ä¸€ä¸ªç”³æŠ¥ææ–™');
                return;
            }

            // æ˜¾ç¤ºè¿›åº¦æ¡
            document.getElementById('uploadProgress').style.display = 'block';
            document.getElementById('btnSubmitBatch').disabled = true;

            // æ¨¡æ‹Ÿè¿›åº¦
            let progress = 0;
            const progressBarFill = document.getElementById('progressBarFill');
            const progressText = document.getElementById('progressText');
            const interval = setInterval(function() {
                progress += 1;
                progressBarFill.style.width = progress + '%';
                progressText.textContent = progress + '%';

                if (progress >= 100) {
                    clearInterval(interval);
                    // æ¨¡æ‹Ÿå¤„ç†å®Œæˆåè·³è½¬åˆ°æŠ¥å‘Šé¡µé¢
                    setTimeout(function() {
                        closeBatchApplicationModal();
                        window.location.href = 'batch-report.html';
                    }, 500);
                }
            }, 50);
        }

        // æ‹–æ‹½ä¸Šä¼ æ”¯æŒ
        const batchUploadArea = document.getElementById('batchUploadArea');
        if (batchUploadArea) {
            batchUploadArea.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.classList.add('drag-over');
            });

            batchUploadArea.addEventListener('dragleave', function() {
                this.classList.remove('drag-over');
            });

            batchUploadArea.addEventListener('drop', function(e) {
                e.preventDefault();
                this.classList.remove('drag-over');
                const files = e.dataTransfer.files;
                handleBatchFileSelection(files);
            });
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            renderTableData();
        });
        
        // æ‰“å¼€æ¨¡æ‹Ÿç”³æŠ¥å¤„ç†æŠ¥å‘Š
        function openSimulatedReport() {
            window.location.href = 'simulated-report.html';
        }
    </script>
    </div>
</body>
</html>